<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference ¬∑ Muscade.jl</title><meta name="title" content="Reference ¬∑ Muscade.jl"/><meta property="og:title" content="Reference ¬∑ Muscade.jl"/><meta property="twitter:title" content="Reference ¬∑ Muscade.jl"/><meta name="description" content="Documentation for Muscade.jl."/><meta property="og:description" content="Documentation for Muscade.jl."/><meta property="twitter:description" content="Documentation for Muscade.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="Muscade.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><a class="tocitem" href="Theory.html">Theory</a></li><li><span class="tocitem">User manual</span><ul><li><a class="tocitem" href="Modelling.html">Creating a model</a></li><li><a class="tocitem" href="Solvers.html">Solvers</a></li><li><a class="tocitem" href="Elements.html">Implementing new elements</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="BeamElements.html">Euler beam element</a></li><li><a class="tocitem" href="StaticBeamAnalysis.html">Static analysis of a beam</a></li><li><a class="tocitem" href="DynamicBeamAnalysis.html">Modal analysis of a beam</a></li><li><a class="tocitem" href="DecayAnalysis.html">Estimating model parameters</a></li><li><a class="tocitem" href="DryFriction.html">DryFriction</a></li></ul></li><li class="is-active"><a class="tocitem" href="reference.html">Reference</a><ul class="internal"><li><a class="tocitem" href="#Constants"><span>Constants</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li><li><a class="tocitem" href="#Macros"><span>Macros</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><span class="tocitem">Appendix</span><ul><li><a class="tocitem" href="TypeStable.html">Type-stability</a></li><li><a class="tocitem" href="Memory.html">Memory management</a></li><li><a class="tocitem" href="Adiff.html">Automatic differentiation</a></li><li><a class="tocitem" href="litterature.html">Literature</a></li></ul></li><li><a class="tocitem" href="LICENSE.html">MIT License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="reference.html">Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="reference.html">Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SINTEF/Muscade.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SINTEF/Muscade.jl/blob/main/docs/src/reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="reference"><a class="docs-heading-anchor" href="#reference">Reference</a><a id="reference-1"></a><a class="docs-heading-anchor-permalink" href="#reference" title="Permalink"></a></h1><h2 id="Constants"><a class="docs-heading-anchor" href="#Constants">Constants</a><a id="Constants-1"></a><a class="docs-heading-anchor-permalink" href="#Constants" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.noFB" href="#Muscade.noFB"><code>Muscade.noFB</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">noFB</code></pre><p>A constant, used by elements&#39; <code>residual</code> or <code>lagrangian</code> as their 3rd output if they do provide  any feedback to the solver (for example, on the reduction of the barrier parameter in interior point method).</p><p>Example: <code>return L,noFB</code></p><p>See also: <a href="reference.html#Muscade.noFB"><code>noFB</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.œµ" href="#Muscade.œµ"><code>Muscade.œµ</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">œµ (\epsilon)</code></pre><p>an alias for <code>Base.eps(ùï£)</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L89-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚àû" href="#Muscade.‚àû"><code>Muscade.‚àû</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚àû (\infty)</code></pre><p>an alias for <code>Base.inf</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L95-L99">source</a></section></article><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.AbstractElement" href="#Muscade.AbstractElement"><code>Muscade.AbstractElement</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractElement</code></pre><p>An abstract data type.  An element type <code>MyElement</code> must be declared as a subtype of <code>AbstractElement</code>.</p><p><code>MyELement</code>must provide a constructor with interface</p><pre><code class="nohighlight hljs">`eleobj = MyElement(nod::Vector{Node}; kwargs...)`</code></pre><p>See also: <a href="reference.html#Muscade.coord-Tuple{AbstractVector{Node}}"><code>coord</code></a>, <a href="reference.html#Muscade.Node"><code>Node</code></a>, <a href="reference.html#Muscade.lagrangian-Tuple{}"><code>lagrangian</code></a>    </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.DirectXUA" href="#Muscade.DirectXUA"><code>Muscade.DirectXUA</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DirectXUA{OX,OU,IA}</code></pre><p>A non-linear direct solver for optimisation FEM.</p><p>An analysis is carried out by a call with the following syntax:</p><pre><code class="nohighlight hljs">initialstate    = initialize!(model)
stateXUA        = solve(DirectXUA{OX,OU,IA};initialstate,time=0:1.:5)</code></pre><p>The solver does not yet support interior point methods. </p><p><strong>Parameters</strong></p><ul><li><code>OX</code>                0 for static analysis                     1 for first order problems in time (viscosity, friction, measurement of velocity)                     2 for second order problems in time (inertia, measurement of acceleration) </li><li><code>OU</code>                0 for white noise prior to the unknown load process                     2 otherwise</li><li><code>IA</code>                0 for XU problems (variables of class A will be unchanged)                     1 for XUA problems                                                  </li></ul><p><strong>Named arguments</strong></p><ul><li><code>dbg=(;)</code>           a named tuple to trace the call tree (for debugging).</li><li><code>verbose=true</code>      set to false to suppress printed output (for testing).</li><li><code>silenterror=false</code> set to true to suppress print out of error (for testing) .</li><li><code>initialstate</code>      a <code>State</code>.</li><li><code>time</code>              an <code>AbstractRange</code> of times at which to compute the steps.  Example: 0:0.1:5.                       </li><li><code>maxiter=50</code>        maximum number of Newton-Raphson iterations. </li><li><code>maxŒîŒª=1e-5</code>        convergence criteria: a norm of the scaled <code>Œõ</code> increment.</li><li><code>maxŒîx=1e-5</code>        convergence criteria: a norm of the scaled <code>X</code> increment. </li><li><code>maxŒîu=1e-5</code>        convergence criteria: a norm of the scaled <code>U</code> increment. </li><li><code>maxŒîa=1e-5</code>        convergence criteria: a norm of the scaled <code>A</code> increment.</li><li><code>saveiter=false</code>    set to true so that the output <code>state</code> is a vector (over the iterations) of                      vectors (over the steps) of <code>State</code>s of the model (for debugging                      non-convergence). </li></ul><p>Setting the following flags to <code>true</code> will improve the sparsity of the system. But setting a flag to <code>true</code> when the condition isn&#39;t met causes the Hessian to be wrong, which is detrimental for convergence.                      </p><ul><li><code>Xwhite=false</code>      <code>true</code> if response measurement error is a white noise process.</li><li><code>XUindep=false</code>     <code>true</code> if response measurement error is independant of <code>U</code></li><li><code>UAindep=false</code>     <code>true</code> if <code>U</code> is independant of <code>A</code></li><li><code>XAindep=false</code>     <code>true</code> if response measurement error is independant of <code>A</code></li></ul><p><strong>Output</strong></p><p>A vector of length equal to that of <code>time</code> containing the state of the optimized model at each of these steps.                       </p><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>, <a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>initialize!</code></a>, <a href="reference.html#Muscade.SweepX"><code>SweepX</code></a>, <a href="reference.html#Muscade.FreqXU"><code>FreqXU</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/DirectXUA.jl#L302-L351">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.DofConstraint" href="#Muscade.DofConstraint"><code>Muscade.DofConstraint</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DofConstraint{Œªclass,Nx,Nu,Na,xinod,xfield,uinod,ufield,ainod,
    afield,Œªinod,Œªfield,Tg,Tmode} &lt;: AbstractElement</code></pre><p>An element to apply physical/optimisation equality/inequality constraints on dofs. </p><p>The constraints are holonomic, i.e. they apply to the values, not the time derivatives, of the involved dofs.  This element is very general but not very user-friendly to construct, factory functions are provided for better useability.  The sign convention is that the gap <code>g‚â•0</code> and the Lagrange multiplier <code>Œª‚â•0</code>.</p><p>This element can generate three classes of constraints, depending on the input argument <code>Œªclass</code>.</p><ul><li><code>Œªclass=:X</code> Physical constraint.  In mechanics, the Lagrange multiplier dof is a   generalized force, dual of the gap. The gap function must be of the form <code>gap(x,t,gargs...)</code>.</li><li><code>Œªclass=:U</code> Time varying optimisation constraint. For example: find <code>A</code>-parameters so that  at all times, the response does not exceed a given criteria. The gap function must be of the form     <code>gap(x,u,a,t,gargs...)</code>.</li><li><code>Œªclass=:A</code> Time invariant optimisation constraint. For example: find <code>A</code>-parameters such that  <code>A[1]+A[2]=gargs.somevalue</code>. The gap function must be of the form <code>gap(a,gargs...)</code>.</li></ul><p><strong>Named arguments to the constructor</strong></p><ul><li><code>xinod::NTuple{Nx,ùï´}=()</code>       For each X-dof to be constrained, its element-node number.</li><li><code>xfield::NTuple{Nx,Symbol}=()</code> For each X-dof to be constrained, its field.</li><li><code>uinod::NTuple{Nu,ùï´}=()</code>       For each U-dof to be constrained, its element-node number.</li><li><code>ufield::NTuple{Nu,Symbol}=()</code> For each U-dof to be constrained, its field.</li><li><code>ainod::NTuple{Na,ùï´}=()</code>       For each A-dof to be constrained, its element-node number.</li><li><code>afield::NTuple{Na,Symbol}=()</code> For each A-dof to be constrained, its field.</li><li><code>Œªinod::ùï´</code>                     The element-node number of the Lagrange multiplier.</li><li><code>Œªclass::Symbol</code>               The class (<code>:X</code>,<code>:U</code> or <code>:A</code>) of the Lagrange multiplier.                                 See the explanation above for classes of constraints</li><li><code>Œªfield::Symbol</code>               The field of the Lagrange multiplier.</li><li><code>gap::Function</code>                The gap function.</li><li><code>gargs::NTuple</code>                Additional inputs to the gap function.</li><li><code>mode::Function</code>               where <code>mode(t::‚Ñù) -&gt; Symbol</code>, with value <code>:equal</code>,                                 <code>:positive</code> or <code>:off</code> at any time. An <code>:off</code> constraint                                 will set the Lagrange multiplier to zero.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using Muscade
model           = Model(:TestModel)
n1              = addnode!(model,ùï£[0]) 
e1              = addelement!(model,DofConstraint,[n1],xinod=(1,),xfield=(:t1,),
                              Œªinod=1, Œªclass=:X, Œªfield=:Œª1,gap=(x,t)-&gt;x[1]+.1,
                              mode=positive)
e2              = addelement!(model,QuickFix  ,[n1],inod=(1,),field=(:t1,),
                              res=(x,u,a,t)-&gt;0.4x.+.08+.5x.^2)
initialstate    = initialize!(model)
setdof!(initialstate,1.;field=:Œª1)
state           = solve(SweepX{0};initialstate,time=[0.],verbose=false) 
X               = state[1].X[1]</code></pre><p>See also: <a href="reference.html#Muscade.Hold"><code>Hold</code></a>, <a href="reference.html#Muscade.ElementConstraint"><code>ElementConstraint</code></a>, <a href="reference.html#Muscade.off-Tuple{Any}"><code>off</code></a>, <a href="reference.html#Muscade.equal-Tuple{Any}"><code>equal</code></a>, <a href="reference.html#Muscade.positive-Tuple{Any}"><code>positive</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L285-L344">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.DofCost" href="#Muscade.DofCost"><code>Muscade.DofCost</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DofCost{Class,Nx,Nu,Na,xinod,xfield,uinod,ufield,ainod,
    afield,Tcost,Tcostargs} &lt;: AbstractElement</code></pre><p>An element to apply costs on combinations of dofs.  </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>xinod::NTuple{Nx,ùï´}=()</code>       For each X-dof to enter <code>cost</code>, its element-node number.</li><li><code>xfield::NTuple{Nx,Symbol}=()</code> For each X-dof to enter <code>cost</code>, its field.</li><li><code>uinod::NTuple{Nu,ùï´}=()</code>       For each U-dof to enter <code>cost</code>, its element-node number.</li><li><code>ufield::NTuple{Nu,Symbol}=()</code> For each U-dof to enter <code>cost</code>, its field.</li><li><code>ainod::NTuple{Na,ùï´}=()</code>       For each A-dof to enter <code>cost</code>, its element-node number.</li><li><code>afield::NTuple{Na,Symbol}=()</code> For each A-dof to enter <code>cost</code>, its field.</li><li><code>class:Symbol</code>                 <code>:A</code> for cost on A-dofs only, <code>:I</code> (&quot;instant&quot;) otherwise.</li><li><code>cost::Function</code>               if <code>class==:I</code>, <code>cost(X,U,A,t,costargs...)‚Üí‚Ñù</code>                                if <code>class==:A</code>, <code>cost(A,costargs...)‚Üí‚Ñù</code>                                 <code>X</code> and <code>U</code> are tuples (derivates of dofs...), and <code>‚àÇ0(X)</code>,<code>‚àÇ1(X)</code>,<code>‚àÇ2(X)</code>                                 must be used by <code>cost</code> to access the value and derivatives of <code>X</code> (resp. <code>U</code>) </li><li><code>[costargs::NTuple=() or NamedTuple] of additional arguments passed to</code>cost``</li></ul><p><strong>Requestable internal variables</strong></p><ul><li><code>cost</code>, the value of the cost.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">ele1 = addelement!(model,DofCost,[nod1],xinod=(1,),field=(:tx1,),
       class=:I,cost=(X,U,A,t;X0)-&gt;(X[1]-X0)^2,costargs=(;X0=0.27)</code></pre><p>See also: <a href="reference.html#Muscade.SingleDofCost"><code>SingleDofCost</code></a>, <a href="reference.html#Muscade.ElementCost"><code>ElementCost</code></a>, <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L1-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.DofLoad" href="#Muscade.DofLoad"><code>Muscade.DofLoad</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DofLoad{Tvalue,Field} &lt;: AbstractElement</code></pre><p>An element to apply a loading term to a single X-dof.  </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>field::Symbol</code>.</li><li><code>value::Function</code>, where <code>value(t::‚Ñù) ‚Üí ‚Ñù</code>.</li></ul><p><strong>Requestable internal variables</strong></p><ul><li><code>F</code>, the value of the load.</li></ul><p><strong>Examples</strong></p><pre><code class="nohighlight hljs">using Muscade
model = Model(:TestModel)
node  = addnode!(model,ùï£[0,0])
e     = addelement!(model,DofLoad,[node];field=:tx,value=t-&gt;3t-1)</code></pre><p>See also: <a href="reference.html#Muscade.Hold"><code>Hold</code></a>, <a href="reference.html#Muscade.DofCost"><code>DofCost</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L197-L218">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.EigX" href="#Muscade.EigX"><code>Muscade.EigX</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">eiginc = solve(EigX{‚Ñù};state=initialstate,nmod)
eiginc = solve(EigX{‚ÑÇ};state=initialstate,nmod)</code></pre><p>Given an initial (typicaly static) state <code>initialstate</code>, computes the lowest <code>nmod</code> eigenmodes of a system.  <code>EigX{‚Ñù}</code> computes real eigenmodes not accounting for damping. <code>EigX{‚Ñù}</code> computes complex eigenmodes accounting for damping. The data structure <code>eiginc</code> can be passed to <code>increment</code> to obtain dynamic states superimposing mode shapes.</p><p><strong>Input</strong></p><ul><li><code>initialstate</code> - a <code>State</code></li><li><code>nmod=5</code> - the number of eigenmodes to identify</li><li><code>droptol=1e-9</code> - in the stiffness and mass matrix, the magnitude of a term relative to the largest term in the matrix       under which the term is set to zero.</li><li>Further named arguments: see the optional keyword arguments to <code>geneig</code>.         </li></ul><p><strong>Output</strong></p><ul><li>an object of type <code>EigX‚Ñùincrement</code> or <code>EigX‚ÑÇincrement</code>, for use with <a href="reference.html#Muscade.increment"><code>increment</code></a> to create a snapshot of the oscillating system.</li></ul><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>, <a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>initialize!</code></a>, <a href="reference.html#Muscade.increment"><code>increment</code></a>, <a href="reference.html#Muscade.geneig"><code>geneig</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/EigX.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.EigXU" href="#Muscade.EigXU"><code>Muscade.EigXU</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EigXU{OX,OU}</code></pre><p>Study the combinations of load and response that are least detected by sensor systems.</p><p>An analysis is carried out by a call with the following syntax:</p><pre><code class="nohighlight hljs">initialstate    = initialize!(model)
eiginc          = solve(EigXU{OX,OU};Œîœâ, p, nmod,initialstate)</code></pre><p>The solver linearises the problem (computes the Hessian of the Lagrangian) at <code>initialstate</code> and solves  the ŒõXU-eigenvalue problem at frequencies œâ·µ¢ = Œîœâ*i with i‚àà{0,...,2·µñ-1}.</p><p><strong>Parameters</strong></p><ul><li><code>OX</code>                0 for static analysis                     1 for first OX problems in time (viscosity, friction, measurement of velocity)                     2 for second OX problems in time (inertia, measurement of acceleration) </li><li><code>OU</code>                0 for white noise prior to the unknown load process                     2 otherwise</li></ul><p><strong>Named arguments</strong></p><ul><li><code>dbg=(;)</code>           a named tuple to trace the call tree (for debugging).</li><li><code>verbose=true</code>      set to false to suppress printed output (for testing).</li><li><code>initialstate</code>      a <code>State</code>.</li><li><code>nmod</code>              the number of eigen-modes to identusy</li><li><code>Œîœâ</code>                frequency step</li><li><code>p</code>                 <code>2^p</code> steps will be analysed.      </li><li><code>droptol=1e-10</code>     set to zero terms in the incremental matrices that are smaller than <code>droptol</code> in absolute value.                      </li></ul><p><strong>Output</strong></p><ul><li>an object of type <code>EigXUincrement</code> for use with <a href="reference.html#Muscade.increment"><code>increment</code></a> to create a snapshot of the oscillating system.</li></ul><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>, <a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>initialize!</code></a>, <a href="reference.html#Muscade.studysingular-Tuple{Muscade.State}"><code>studysingular</code></a>, <a href="reference.html#Muscade.SweepX"><code>SweepX</code></a>, <a href="reference.html#Muscade.DirectXUA"><code>DirectXUA</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/EigXU.jl#L61-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ElementConstraint" href="#Muscade.ElementConstraint"><code>Muscade.ElementConstraint</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ElementConstraint{Teleobj,Œªinod,Œªfield,Nu,Treq,Tg,Tgargs,Tmode} &lt;: AbstractElement</code></pre><p>An element to apply optimisation equality/inequality constraints on the element-results of  another &quot;target&quot; element. The target element must <em>not</em> be added separately to the model.  Instead, the  <code>ElementType</code>, and the named arguments to the target element are provided as input to the  <code>ElementConstraint</code> constructor.</p><p>This element generates a time varying optimisation constraint. For example: find <code>A</code>-parameters so that    at all times, the element-result von-Mises stress does not exceed a given value. </p><p>The Lagrangian multiplier introduced by this optimisation constraint is of class :U   </p><p><strong>Named arguments to the constructor</strong></p><ul><li><p><code>Œªinod::ùï´</code>            The element-node number of the Lagrange multiplier.</p></li><li><p><code>Œªfield::Symbol</code>      The field of the Lagrange multiplier.</p></li><li><p><code>req</code>                 A request for element-results to be extracted from the target element, see <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>.                       The request is formulated as if adressed directly to the target element.</p></li><li><p><code>g‚Çõ::ùï£=1.</code>             A scale for the gap.</p></li><li><p><code>Œª‚Çõ::ùï£=1.</code>             A scale for the Lagrange multiplier.</p></li><li><p><code>gap</code>                 A gap function <code>gap(eleres,X,U,A,t,gargs...)‚Üí‚Ñù</code>.                       <code>eleres</code> is the output of the above-mentionned request to the target element.                        <code>X</code> and <code>U</code> are tuples (derivates of dofs...), and <code>‚àÇ0(X)</code>,<code>‚àÇ1(X)</code>,<code>‚àÇ2(X)</code>                        must be used by <code>cost</code> to access the value and derivatives of <code>X</code> (resp. <code>U</code>).                       <code>X</code>, <code>U</code> and <code>A</code> are the degrees of freedom of the element <code>ElementType</code>.</p></li><li><p><code>gargs::NTuple</code>       Additional inputs to the gap function. </p></li><li><p><code>mode::Function</code>      where <code>mode(t::‚Ñù) -&gt; Symbol</code>, with value <code>:equal</code>,                        <code>:positive</code> or <code>:off</code> at any time. An <code>:off</code> constraint                        will set the Lagrange multiplier to zero.</p></li><li><p><code>ElementType</code>         The named of the constructor for the relevant element </p></li><li><p><code>elementkwargs</code>       A named tuple containing the named arguments of the <code>ElementType</code> constructor.     </p></li></ul><p><strong>Requestable internal variables</strong></p><p>Not to be confused with the <code>req</code> provided as input to <code>addelement!</code> when adding an <code>ElementConstraint</code>, one can, after  the analysis, request results from <code>ElementConstraint</code> </p><ul><li><code>Œª</code>                   The constraints Lagrange multiplier</li><li><code>gap</code>                 The constraints gap function</li><li><code>eleres(...)</code>         where <code>...</code> is the list of requestables wanted from the target element.  The &quot;prefix&quot;                         <code>eleres</code> is there to prevent possible confusion with variables requestable from <code>ElementConstraint</code>.                         For example <code>@request gap</code> would extract the value of the <code>ElementConstraint</code>&#39;s function <code>gap</code>, while                       <code>@request eleres(gap)</code> refers to the value of a variable called <code>gap</code> in the target element. </li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">@once gap(eleres,X,U,A,t) = eleres.Fh^2
ele1 = addelement!(model,ElementCoonstraint,[nod1];req=@request(Fh),
                   gap,Œªinod=1,Œªfield=:Œª,mode=equal, 
                   ElementType=AnchorLine,
                   elementkwargs=(Œîx‚Çòtop=[5.,0,0], x‚Çòbot=[250.,0],L=290., buoyancy=-5e3))</code></pre><p>See also: <a href="reference.html#Muscade.Hold"><code>Hold</code></a>, <a href="reference.html#Muscade.DofConstraint"><code>DofConstraint</code></a>, <a href="reference.html#Muscade.off-Tuple{Any}"><code>off</code></a>, <a href="reference.html#Muscade.equal-Tuple{Any}"><code>equal</code></a>, <a href="reference.html#Muscade.positive-Tuple{Any}"><code>positive</code></a>, <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>, <a href="reference.html#Muscade.@once-Tuple{Any, Any}"><code>@once</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L431-L487">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ElementCost" href="#Muscade.ElementCost"><code>Muscade.ElementCost</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ElementCost{Teleobj,Treq,Tcost,Tcostargs} &lt;: AbstractElement</code></pre><p>An element to apply costs on another &quot;target&quot; element&#39;s dofs and element-results.   The target element must <em>not</em> be added separately to the model.  Instead, the  <code>ElementType</code>, and the named arguments to the target element are provided as input to the <code>ElementCost</code> constructor.</p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>req</code>                 A request for element-results to be extracted from the target element, see <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>.                       The request is formulated as if adressed directly to the target element.</li><li><code>cost</code>                A cost function <code>cost(eleres,X,U,A,t,costargs...)‚Üí‚Ñù</code>.                        <code>eleres</code> is the output of the above-mentionned request to the target element.                            <code>X</code> and <code>U</code> are tuples (derivates of dofs...), and <code>‚àÇ0(X)</code>,<code>‚àÇ1(X)</code>,<code>‚àÇ2(X)</code>                        must be used by <code>cost</code> to access the value and derivatives of <code>X</code> (resp. <code>U</code>).                       <code>X</code>, <code>U</code> and <code>A</code> are the degrees of freedom of the element <code>ElementType</code>.</li><li><code>[costargs::NTuple=() or NamedTuple]</code> Additional arguments passed to <code>cost</code>.</li><li><code>ElementType</code>         The named of the constructor for the relevant element.</li><li><code>elementkwargs</code>       A named tuple containing the named arguments of the <code>ElementType</code> constructor.     </li></ul><p><strong>Requestable internal variables</strong></p><p>Not to be confused with the <code>req</code> provided as input to <code>addelement!</code> when adding an <code>ElementCost</code>, one can, after  the analysis, request results from <code>ElementConstraint</code> </p><ul><li><code>cost</code>               The value of <code>cost(eleres,X,U,A,t,costargs...)</code>.</li><li><code>eleres(...)</code>        where <code>...</code> is the list of requestables wanted from the target element.  The &quot;prefix&quot;                        <code>eleres</code> is there to prevent possible confusion with variables requestable from <code>ElementConstraint</code>.                        For example <code>@request cost</code> would extract the value of the <code>ElementConstraint</code>&#39;s function <code>cost</code>, while                      <code>@request eleres(cost)</code> refers to the value of a variable called <code>cost</code> in the target element. </li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">@once cost(eleres,X,U,A,t;Fh0) = (eleres.Fh-Fh0)^2
ele1 = addelement!(model,ElementCost,[nod1];req=@request(Fh),
                   cost=cost,
                   costargs = (;Fh0=0.27)
                   ElementType=AnchorLine,
                   elementkwargs=(Œõ‚Çòtop=[5.,0,0], x‚Çòbot=[250.,0], L=290., buoyancy=-5e3))</code></pre><p>See also: <a href="reference.html#Muscade.SingleDofCost"><code>SingleDofCost</code></a>, <a href="reference.html#Muscade.DofCost"><code>DofCost</code></a>, <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>, <a href="reference.html#Muscade.@once-Tuple{Any, Any}"><code>@once</code></a> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L58-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.FreqXU" href="#Muscade.FreqXU"><code>Muscade.FreqXU</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FreqXU{OX,OU}</code></pre><p>A linear frequency domain solver for optimisation FEM.</p><p>An analysis is carried out by a call with the following syntax:</p><pre><code class="nohighlight hljs">initialstate    = initialize!(model)
stateXU         = solve(FreqXU{OX,OU};Œît, p, t‚ÇÄ,t·µ£,initialstate)</code></pre><p>The solver linearises the problem (computes the Hessian of the Lagrangian) at <code>initialstate</code> with time <code>t·µ£</code>, and solves it at times <code>t=range(start=t‚ÇÄ,step=Œît,length=2^p)</code>. The return</p><p><strong>Parameters</strong></p><ul><li><code>OX</code>                0 for static analysis                     1 for first order problems in time (viscosity, friction, measurement of velocity)                     2 for second order problems in time (inertia, measurement of acceleration) </li><li><code>OU</code>                0 for white noise prior to the unknown load process                     2 otherwise</li></ul><p><strong>Named arguments</strong></p><ul><li><code>dbg=(;)</code>           a named tuple to trace the call tree (for debugging).</li><li><code>verbose=true</code>      set to false to suppress printed output (for testing).</li><li><code>silenterror=false</code> set to true to suppress print out of error (for testing) .</li><li><code>initialstate</code>      a <code>State</code>.</li><li><code>t‚ÇÄ=0.</code>             time of first step.                      </li><li><code>Œît</code>                time step.</li><li><code>p</code>                 <code>2^p</code> steps will be analysed.      </li><li><code>t·µ£=t‚ÇÄ</code>             reference time for linearisation.</li><li><code>droptol=1e-10</code>     set to zero terms in the incremental matrices that are smaller than <code>droptol</code> in absolute value.                      </li></ul><p><strong>Output</strong></p><p>A vector of length <code>2^p</code> containing the state of the model at each of these steps.                       </p><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>, <a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>initialize!</code></a>, <a href="reference.html#Muscade.studysingular-Tuple{Muscade.State}"><code>studysingular</code></a>, <a href="reference.html#Muscade.SweepX"><code>SweepX</code></a>, <a href="reference.html#Muscade.DirectXUA"><code>DirectXUA</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/FreqXU.jl#L15-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.FunctionFromVector" href="#Muscade.FunctionFromVector"><code>Muscade.FunctionFromVector</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">f  = FunctionFromVector(xs::AbstractRange,ys::AbstractVector)
y  = f(x)

Linear interpolation.  Fails if `x` is outside the range `xs`</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Functors.jl#L4-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.Hold" href="#Muscade.Hold"><code>Muscade.Hold</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Hold &lt;: AbstractElement</code></pre><p>An element to set a single X-dof to zero.  </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>field::Symbol</code>. The field of the X-dof to constraint.</li><li><code>Œªfield::Symbol=Symbol(:Œª,field)</code>. The field of the Lagrange multiplier.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">using Muscade
model = Model(:TestModel)
node  = addnode!(model,ùï£[0,0])
e     = addelement!(model,Hold,[node];field=:tx)</code></pre><p>See also: <a href="reference.html#Muscade.DofConstraint"><code>DofConstraint</code></a>, <a href="reference.html#Muscade.DofLoad"><code>DofLoad</code></a>, <a href="reference.html#Muscade.DofCost"><code>DofCost</code></a> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L404-L422">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.IdVec" href="#Muscade.IdVec"><code>Muscade.IdVec</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An &quot;identity vector&quot;</p><p>id = IdVec i  = 9834987 id[i] == i # true for any i</p><p>See also Julia&#39;s <code>identity</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L247-L255">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.Model" href="#Muscade.Model"><code>Muscade.Model</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">model = Model([ID=:my_model])</code></pre><p>Construct a blank <code>model</code>, which will be mutated to create a finite element [optimization] problem.</p><p>See also: <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>describe</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L131-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.Monitor" href="#Muscade.Monitor"><code>Muscade.Monitor</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Monitor &lt;: AbstractElement</code></pre><p>Debbuging tool: An element for for monitoring inputs to and outputs from another element, during an analysis.     </p><p>Instead of adding the element to be monitored directly into the model, add this element with the element to be monitored as argument.</p><p>Inputs and outputs are @show&#39;n. </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>ElementType</code>         The the type of element to be monitored-</li><li><code>trigger</code>             A function that takes <code>dbg</code> as an input and returns a boolean                        (<code>true</code>) to printout.</li><li><code>elementkwargs</code>       a <code>NamedTuple</code> containing the named arguments of the <code>ElementType</code> constructor.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L565-L583">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.Node" href="#Muscade.Node"><code>Muscade.Node</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Node</code></pre><p>The eltype of vectors handed by Muscade as first argument to element constructors.</p><p>Example: <code>function SingleDofCost(nod::Vector{Node};class::Symbol, ... )</code></p><p>See also: <a href="reference.html#Muscade.coord-Tuple{AbstractVector{Node}}"><code>coord</code></a> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L35-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.QuickFix" href="#Muscade.QuickFix"><code>Muscade.QuickFix</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">QuickFix &lt;: AbstractElement</code></pre><p>An element for creating simple elements with &quot;one line&quot; of code.   Elements thus created have several limitations:</p><ul><li>physical elements with only X-dofs.</li><li>only <code>R</code> can be espied.</li></ul><p>The element is intended for testing.  Muscade-based applications should not include this in their API. </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>inod::NTuple{Nx,ùï´}</code>. The element-node numbers of the X-dofs.</li><li><code>field::NTuple{Nx,Symbol}</code>. The fields of the X-dofs.</li><li><code>res::Function</code>, where <code>res(X::‚Ñù1,X‚Ä≤::‚Ñù1,X‚Ä≥::‚Ñù1,t::‚Ñù) ‚Üí ‚Ñù1</code>, the residual.</li></ul><p><strong>Examples</strong></p><p>A one-dimensional linear elastic spring with stiffness 2.</p><pre><code class="language-julia hljs">using Muscade
model = Model(:TestModel)
node1  = addnode!(model,ùï£[0])
node2  = addnode!(model,ùï£[1])
e = addelement!(model,QuickFix,[node1,node2];inod=(1,2),field=(:tx1,:tx1),
                res=(X,X‚Ä≤,X‚Ä≥,t)-&gt;Svector{2}(2*(X[1]-X[2]),2*(X[2]-X[1])) )</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L524-L552">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.SingleDofCost" href="#Muscade.SingleDofCost"><code>Muscade.SingleDofCost</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SingleDofCost{Derivative,Class,Field,Tcost} &lt;: AbstractElement</code></pre><p>An element with a single node, for adding a cost to a given dof.  </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>class::Symbol</code>, either <code>:X</code>, <code>:U</code> or <code>:A</code>.</li><li><code>field::Symbol</code>.</li><li><code>cost::Function</code>, where <ul><li><code>cost(x::‚Ñù,t::‚Ñù[,costargs...]) ‚Üí ‚Ñù</code> if <code>class</code> is <code>:X</code> or <code>:U</code>, and </li><li><code>cost(x::‚Ñù,    [,costargs...]) ‚Üí ‚Ñù</code> if <code>class</code> is <code>:A</code>.</li></ul></li><li><code>[costargs::NTuple=() or NamedTuple] of additional arguments passed to</code>cost``</li><li><code>derivative::Int=0</code> 0, 1 or 2 - which time derivative of the dof enters the cost. 	    </li></ul><p><strong>Requestable internal variables</strong></p><ul><li><code>cost</code>, the value of the cost.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">using Muscade
model = Model(:TestModel)
node  = addnode!(model,ùï£[0,0])
e     = addelement!(model,SingleDofCost,[node];class=:X,field=:tx,
                    costargs=(3.,),cost=(x,t,three)-&gt;(x/three)^2)</code></pre><p>See also: <a href="reference.html#Muscade.DofCost"><code>DofCost</code></a>, <a href="reference.html#Muscade.ElementCost"><code>ElementCost</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L120-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.SingleUdof" href="#Muscade.SingleUdof"><code>Muscade.SingleUdof</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SingleUdof{XField,Ufield,Tcost} &lt;: AbstractElement</code></pre><p>An element that creates a Udof, and associates a cost to its value. The value of the Udof is applied as a load to a Xdof on the same node.  </p><p><strong>Named arguments to the constructor</strong></p><ul><li><code>Xfield::Symbol</code>.</li><li><code>Ufield::Symbol</code>.</li><li><code>cost::Function</code>, where <code>cost(u::‚Ñù,t::‚Ñù[,costargs...]) ‚Üí ‚Ñù</code> </li><li><code>[costargs::NTuple=() or NamedTuple] of additional arguments passed to</code>cost``</li></ul><p><strong>Requestable internal variables</strong></p><ul><li><code>cost</code>, the value of the cost.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">using Muscade
model = Model(:TestModel)
node  = addnode!(model,ùï£[0,0])
e     = addelement!(model,SingleUdof,[node];Xfield=:tx,Ufield=:utx,
                    costargs=(3.,),cost=(x,t,three)-&gt;(x/three)^2)</code></pre><p>See also: <a href="reference.html#Muscade.DofCost"><code>DofCost</code></a>, <a href="reference.html#Muscade.ElementCost"><code>ElementCost</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L158-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.SpyAxe" href="#Muscade.SpyAxe"><code>Muscade.SpyAxe</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">axe = Muscade.SpyAxe</code></pre><p>Spoof a GLMakie <code>axe</code> object so that calls like</p><pre><code class="nohighlight hljs">using Muscade: lines!
lines!(  axe,args...;kwargs...)</code></pre><p>result in <code>args</code> and <code>kwargs</code> being stored in <code>axe</code>, allowing to test functions that generate plots. Results are accessed by for example</p><pre><code class="nohighlight hljs">axe.call[3].fun        
axe.call[3].args[2]</code></pre><p>To get the name of the 3rd GLMakie function that was called, and the 2nd input argument of the call.</p><p>Only <code>lines!</code>, <code>scatter!</code> and <code>mesh!</code>  are implemented, but more functions can easily be added.</p><p>In given Julia session, if GLMakie is used, then Muscade: lines! (etc.) cannot be used, and conversedly: restart Julia when switching.  </p><p>The reason is that Muscade defines <code>lines!</code> (etc.) instead of overloading it. This is deliberate, to allow Muscade to run unit tests of graphical generation, without making GLMakie a dependency of Muscade.  This again is because element developers remain free to base <code>draw</code> for their suite of elements on other graphic packages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SelfDraw.jl#L66-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.SweepX" href="#Muscade.SweepX"><code>Muscade.SweepX</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SweepX{ORDER}</code></pre><p>A non-linear, time domain solver, that solves the problem time-step by time-step. Only the <code>X</code>-dofs of the model are solved for, while <code>U</code>-dofs and <code>A</code>-dofs are unchanged.</p><ul><li><code>SweepX{0}</code> is Newton-Raphson, with feasibility line-search, to handle inequality constraints. </li><li><code>SweepX{1}</code> is implicit Euler, with feasibility line-search. </li><li><code>SweepX{2}</code> is Newmark-Œ≤, with Newton-Raphson iterations and feasibility line search</li></ul><p>IMPORTANT NOTE: Muscade does not allow elements to have state variables, for example, plastic strain, or shear-free position for dry friction.  Where the element implements such physics, this  is implemented by introducing the state as a degree of freedom of the element, and solving for its evolution, <em>even in a static problem</em>, requires the use of <code>ORDER‚â•1</code></p><p>An analysis is carried out by a call with the following syntax:</p><pre><code class="nohighlight hljs">initialstate    = initialize!(model)
setdof!(initialstate,1.;class=:U,field=:Œªcsr)
states           = solve(SweepX{2};initialstate=initialstate,time=0:10)</code></pre><p><strong>Named arguments to <code>solve</code>:</strong></p><ul><li><code>dbg=(;)</code>           a named tuple to trace the call tree (for debugging)</li><li><code>verbose=true</code>      set to false to suppress printed output (for testing)</li><li><code>silenterror=false</code> set to true to suppress print out of error (for testing) </li><li><code>initialstate</code>      a <code>State</code>, obtain from <code>√¨nitialize!</code> or <code>SweepX</code>.</li><li><code>time</code>              maximum number of Newton-Raphson iterations </li><li><code>Œ≤=1/4</code>,<code>Œ≥=1/2</code>     parameters to the Newmark-Œ≤ algorithm. Dummy if <code>ORDER&lt;2</code></li><li><code>maxiter=50</code>        maximum number of equilibrium iterations at each step.</li><li><code>maxŒîx=1e-5</code>        convergence criteria: norm of <code>X</code>. D</li><li><code>maxLŒª=‚àû</code>           convergence criteria: norm of the residual. </li><li><code>saveiter=false</code>    set to true so that output <code>states</code> contains the state                     at the iteration of the last step analysed.  Useful to study                     a step that fails to converge. </li><li><code>maxLineIter=50</code>    Maximum number of iteration in the feasibility line search.                     set to 0 to skip the line search (not recommended for models                     with inequality constraints).</li><li><code>sfac=0.5</code>          Parameter in the line search for a feasible point. If a                      tentative result is not feasible, backtrack by a factor <code>sfac</code>.                     If still not feasible, backtrack what is left by a factor <code>sfac</code>,                     and so forth, up to <code>maxLineIter</code> times.</li><li><code>Œ≥fac=0.5</code>          Parameter for feasibility. For an inequality constraint <code>g(X)</code>                     with reaction force <code>Œª</code>, require <code>g(X)*Œª==Œ≥</code>, and multiply                     <code>Œ≥ *= Œ≥fac</code> at each iteration.                            </li></ul><p><strong>Output</strong></p><p>A vector of length equal to that of the named input argument <code>time</code> containing the states at the time steps.                       </p><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>, <a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>initialize!</code></a>, <a href="reference.html#Muscade.findlastassigned-Tuple{Vector}"><code>findlastassigned</code></a>, <a href="reference.html#Muscade.studysingular-Tuple{Muscade.State}"><code>studysingular</code></a>, <a href="reference.html#Muscade.DirectXUA"><code>DirectXUA</code></a>, <a href="reference.html#Muscade.FreqXU"><code>FreqXU</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SweepX.jl#L96-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.composeJacobian" href="#Muscade.composeJacobian"><code>Muscade.composeJacobian</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">composeJacobian{P}(Ty,X_)</code></pre><p>Given <code>Ty</code> obtained using <code>revariate</code>, and <code>X_</code>, obtained using <code>motion{P}(X)</code> where <code>X</code> is a tuple of <code>SVectors</code> and <code>P=constants(X)</code>, compute <code>y</code>, a tuple of length <code>ND</code> of <code>AbstractArrays</code> of same <code>eltype</code> as vectors in <code>X, and</code>y‚àÇX‚ÇÄ<code>, the Jacobian of</code>‚àÇ0(y)<code>with respect to</code>‚àÇ0(X)`.</p><p>See also <a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>revariate</code></a>, <a href="reference.html#Muscade.motion-Union{Tuple{Tuple{Vararg{StaticArraysCore.SVector{N, R}, ND}}}, Tuple{R}, Tuple{N}, Tuple{P}, Tuple{ND}} where {ND, P, N, R}"><code>motion</code></a>, <a href="reference.html#Muscade.motion‚Åª¬π-Union{Tuple{Real}, Tuple{P}} where P"><code>motion‚Åª¬π</code></a>, <a href="reference.html#Muscade.composevalue"><code>composevalue</code></a>   </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L167-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.composevalue" href="#Muscade.composevalue"><code>Muscade.composevalue</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">composevalue{P,ND}(Ty,X_)</code></pre><p>Given <code>Ty</code> obtained using <code>revariate</code>, and <code>X_</code>, obtained using <code>motion{P}(X)</code> where <code>X</code> is a tuple of length <code>ND</code> and <code>P=constants(X)</code>, compute <code>y</code>, a tuple of length <code>ND</code> of <code>AbstractArrays</code> of same <code>eltype</code> as vectors in `X.</p><p>See also <a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>revariate</code></a>, <a href="reference.html#Muscade.motion-Union{Tuple{Tuple{Vararg{StaticArraysCore.SVector{N, R}, ND}}}, Tuple{R}, Tuple{N}, Tuple{P}, Tuple{ND}} where {ND, P, N, R}"><code>motion</code></a>, <a href="reference.html#Muscade.motion‚Åª¬π-Union{Tuple{Real}, Tuple{P}} where P"><code>motion‚Åª¬π</code></a>, <a href="reference.html#Muscade.composeJacobian"><code>composeJacobian</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L156-L163">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.default" href="#Muscade.default"><code>Muscade.default</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default{:fieldname}(namedtuple,defval)</code></pre><p>attempt to get a field <code>fieldname</code> from a <code>NamedTuple</code>. If <code>namedtuple</code> does not have  such a field - or is not a <code>NamedTuple</code>, return <code>defval</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L235-L240">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.geneig" href="#Muscade.geneig"><code>Muscade.geneig</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Œª,v,ncv = geneig{ALGO}(A,B,neig=5)</code></pre><p>Solves <code>(A-Œª*B)*v=0</code>, finding the <code>neig</code> lowest eigenvalues <code>Œª</code> (in absolute value) and the corresponding eigenvectors <code>v</code> (a <code>Vector{Vector}</code>)</p><p><strong>Input</strong></p><p><code>ALGO</code> can be</p><ul><li>:SDP       if <code>A</code> is symmetric definite positive and <code>B</code> is symmetric.  Will return real <code>Œª</code> and <code>v</code>.</li><li>:Hermitian if <code>A</code> is symmetric indefinite and <code>B</code> is symmetric. Will return real <code>Œª</code> and <code>v</code>.</li><li>:Complex   otherwise, will return complex <code>Œª</code> and <code>v</code>. </li></ul><p>Optional keyword arguments:</p><ul><li><code>maxiter     = 300</code></li><li><code>verbosity   = 0 ‚àà {0,1,2,3}</code></li><li><code>krylovdim   = 2neig+6</code></li></ul><p>Uses KrylovKit.jl. Freely based on VibrationGEPHelpers.jl and input from PetrKryslUCSD and stevengj.   See GIThub-blame for bug-credits.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Eigenmodes.jl#L24-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.increment" href="#Muscade.increment"><code>Muscade.increment</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">state = increment{OX}(initialstate,eiginc,imod,A)</code></pre><p>Starting from <code>initalstate</code> for which an <code>EigX</code> analysis has been carried out, and using the output <code>eiginc</code> of that analysis, construct new <code>State</code>s representing the instantaneous state of the  vibrating structure</p><p><strong>Input</strong></p><ul><li><code>OX</code> the number of time derivatives to be computed.  <code>increment(initialstate,eiginc,imod,A)</code> defaults to <code>OX=2</code></li><li><code>initialstate</code> the same initial <code>State</code> provided to <code>EigX</code> to compute <code>eiginc</code></li><li><code>eiginc</code> obtained from <code>EigX</code></li><li><code>imod</code>, an <code>AbstractVector</code> of integer mode numbers</li><li><code>A</code>, an <code>AbstractVector</code> of same length as <code>imod</code>, containing real or complex  amplitudes associated to the modes</li></ul><p><strong>Output</strong></p><ul><li><code>state</code> a snapshot of the vibrating system</li></ul><p>See also: <a href="reference.html#Muscade.EigX"><code>EigX</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/EigX.jl#L52-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.increment-Union{Tuple{OX}, Tuple{Any, Muscade.EigXUincrement, Int64, AbstractVector{Int64}, AbstractVector}} where OX" href="#Muscade.increment-Union{Tuple{OX}, Tuple{Any, Muscade.EigXUincrement, Int64, AbstractVector{Int64}, AbstractVector}} where OX"><code>Muscade.increment</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">state = increment{OX}(initialstate,eiginc,iœâ,imod,A)</code></pre><p>Starting from <code>initalstate</code> for which an <code>EigX</code> analysis has been carried out, and using the output <code>eiginc</code> of that analysis, construct new <code>State</code>s representing the instantaneous state of the  vibrating structure</p><p><strong>Input</strong></p><ul><li><code>OX</code> the number of time derivatives to be computed.  <code>increment(initialstate,eiginc,imod,A)</code> defaults to <code>OX=2</code></li><li><code>initialstate</code> the same initial <code>State</code> provided to <code>EigXU</code> to compute <code>eiginc</code></li><li><code>eiginc</code> obtained from <code>EigXU</code></li><li><code>iœâ</code>, the number of the frequency to consider. <code>œâ=iœâ*Œîœâ</code> where <code>Œîœâ</code> is an input to <a href="reference.html#Muscade.EigXU"><code>EigXU</code></a>. </li><li><code>imod</code>, an <code>AbstractVector</code> of integer mode numbers</li><li><code>A</code>, an <code>AbstractVector</code> of same length as <code>imod</code>, containing real or complex  amplitudes associated to the modes</li></ul><p><strong>Output</strong></p><ul><li><code>state</code> a snapshot of the vibrating system</li></ul><p>See also: <a href="reference.html#Muscade.EigXU"><code>EigXU</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/EigXU.jl#L192-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.motion-Union{Tuple{Tuple{Vararg{StaticArraysCore.SVector{N, R}, ND}}}, Tuple{R}, Tuple{N}, Tuple{P}, Tuple{ND}} where {ND, P, N, R}" href="#Muscade.motion-Union{Tuple{Tuple{Vararg{StaticArraysCore.SVector{N, R}, ND}}}, Tuple{R}, Tuple{N}, Tuple{P}, Tuple{ND}} where {ND, P, N, R}"><code>Muscade.motion</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">P  = constant(X)
X_ = motion{P}(X)</code></pre><p>Transform a <code>NTuple</code> of <code>SVector</code>s, for example the vector <code>X</code> provided as an input to <code>residual</code> or <code>Lagrangian</code> into a <code>SVector</code> of <code>‚àÇ‚Ñù</code>.  This can be used by an element to  compute time derivatives, for example Euler, Coriolis and centrifugal accelerations,  or strain rates.</p><p>Some principles of safe automatic differentiation must be adhered to:</p><ul><li>the function that uses <code>motion</code> must also &#39;unpack&#39; : no variable that is touched by  the output of <code>motion</code> must be returned by the function without having been unpacked by <code>motion‚Åª¬π</code>. Touched variables can for example be marked with an underscore</li><li>The precendence <code>P</code> must be calculated using <code>constants</code> with all variables that are input to  the function and may be differentiated.</li><li>If other levels of automatic differentiation are introduced within the function, unpack in reverse order of packing.    </li></ul><p>See <a href="reference.html#Muscade.motion‚Åª¬π-Union{Tuple{Real}, Tuple{P}} where P"><code>motion‚Åª¬π</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L4-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.motion‚Åª¬π-Union{Tuple{Real}, Tuple{P}} where P" href="#Muscade.motion‚Åª¬π-Union{Tuple{Real}, Tuple{P}} where P"><code>Muscade.motion‚Åª¬π</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">P  = constants(X,U,A,t)
ND = length(X)
X_  = motion{P,ND}(X)
Y_  = f(Y_)    
Y‚ÇÄ = motion‚Åª¬π{P,ND,0}(Y_)
Y‚ÇÅ = motion‚Åª¬π{P,ND,1}(Y_)
Y‚ÇÇ = motion‚Åª¬π{P,ND,2}(Y_)
Y  = motion‚Åª¬π{P,ND  }(Y)</code></pre><p>Extract the value and time derivatives from a variable that is a function of the output of <code>motion</code>. In the above <code>Y</code> is a tuple of length <code>ND</code>.  One can use <code>‚àÇ0</code>,<code>‚àÇ1</code> and <code>‚àÇ2</code> to unpack <code>Y</code>.    </p><p>See also <a href="reference.html#Muscade.motion-Union{Tuple{Tuple{Vararg{StaticArraysCore.SVector{N, R}, ND}}}, Tuple{R}, Tuple{N}, Tuple{P}, Tuple{ND}} where {ND, P, N, R}"><code>motion</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L28-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}" href="#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>Muscade.revariate</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TX = revariate{O}(X)</code></pre><p>The vector <code>X</code> of <code>Real</code>s (possibly: <code>‚àÇ‚Ñù</code>s) is stripped of its partials, an revariated to the order <code>precedence(X)+O</code>.</p><pre><code class="nohighlight hljs">TX = revariate(X)</code></pre><p>revariates to the order <code>precedence(X)</code>.  </p><p><code>revariate</code>, in conjunction with <code>compose</code> can be used to improve performance when the length of  <code>X</code> is smaller than the length of its partials.</p><p>Be extremely careful never to mix any variable that is a function of <code>X</code> with any other variables containing  <code>‚àÇ‚Ñù</code>s but not produced by the same <code>revariate</code>.</p><p>See also: <a href="reference.html#Muscade.compose-Tuple{Any, Any}"><code>compose</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L67-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}" href="#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>Muscade.value</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">y = value{P}(Y)</code></pre><p>Extract the value of an automatic differentiation object, or <code>SArray</code> of such objects.    </p><p>See also: <a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>constants</code></a>, <a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>variate</code></a>, <a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Œ¥</code></a>, <a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>‚àÇ</code></a>, <a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>VALUE</code></a>, <a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>value_‚àÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L143-L149">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}" href="#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>Muscade.value_‚àÇ</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">y,y‚Çì = value_‚àÇ{P,N}(Y)
y,y‚Ä≤ = value_‚àÇ{P  }(Y)</code></pre><p>Get value and derivative in one operation.    </p><p>See also: <a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>constants</code></a>, <a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>variate</code></a>, <a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Œ¥</code></a>, <a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>value</code></a>, <a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>‚àÇ</code></a>, <a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>VALUE</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L185-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}" href="#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Muscade.variate</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">X = variate{P,N}(x)</code></pre><p>where <code>typeof(x)&lt;:SVector{N}</code>, create a <code>SVector</code> of automatic differentiation objects of precedence <code>P</code>.    </p><pre><code class="nohighlight hljs">X = variate{P}(x)</code></pre><p>where <code>typeof(x)&lt;:Real</code>, create an object of precedence <code>P</code>.    </p><p>See also: <a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>constants</code></a>, <a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Œ¥</code></a>, <a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>value</code></a>, <a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>‚àÇ</code></a>, <a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>VALUE</code></a>, <a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>value_‚àÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L107-L117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}" href="#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Muscade.Œ¥</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">X = Œ¥{P,N,R}()</code></pre><p>create a <code>SVector</code> of automatic differentiation objects of precedence <code>P</code> and value <code>zero</code>.    </p><pre><code class="nohighlight hljs">X = Œ¥{P}()</code></pre><p>Create automatic differentiation object of precedence <code>P</code> and value <code>zero</code>.  </p><p>See also: <a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>constants</code></a>, <a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>variate</code></a>, <a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>value</code></a>, <a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>‚àÇ</code></a>, <a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>VALUE</code></a>, <a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>value_‚àÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L92-L102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚ÑÇ" href="#Muscade.‚ÑÇ"><code>Muscade.‚ÑÇ</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚ÑÇ (\bbC)</code></pre><p>an alias for abstract type <code>Complex{&lt;:Real}</code>. For use in dispatching. <code>‚ÑÇ1</code>... <code>‚ÑÇ4</code> are <code>AbstractArrays</code> of dimensions 1 to 4. <code>‚ÑÇ11</code> is an <code>AbstractVector</code> of <code>AbstractVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L40-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚Ñï" href="#Muscade.‚Ñï"><code>Muscade.‚Ñï</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚Ñï (\bbN)</code></pre><p>an alias for <code>UInt64</code>. For use in dispatching. <code>‚Ñï1</code>... <code>‚Ñï4</code> are <code>AbstractArrays</code> of dimensions 1 to 4.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L17-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚Ñù" href="#Muscade.‚Ñù"><code>Muscade.‚Ñù</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚Ñù (\bbR)</code></pre><p>an alias for abstract type <code>Real</code>. For use in dispatching. <code>‚Ñù1</code>... <code>‚Ñù4</code> are <code>AbstractArrays</code> of dimensions 1 to 4. <code>‚Ñù11</code> is an <code>AbstractVector</code> of <code>AbstractVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L32-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚Ñ§" href="#Muscade.‚Ñ§"><code>Muscade.‚Ñ§</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚Ñ§ (\bbZ)</code></pre><p>an alias for abstract type <code>Integer</code>. For use in dispatching. <code>‚Ñ§1</code>... <code>‚Ñ§4</code> are <code>AbstractArrays</code> of dimensions 1 to 4. <code>‚Ñ§11</code> is an <code>AbstractVector</code> of <code>AbstractVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L24-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}" href="#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>Muscade.‚àÇ</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">y‚Çì = ‚àÇ{P,N}(Y)</code></pre><p>Extract the gradient of an automatic differentiation object.  If <code>Y</code> is a <code>SArray</code>,  the index of the partial derivative is appended to the indices of <code>Y</code>.   </p><pre><code class="nohighlight hljs">y‚Ä≤ = ‚àÇ{P}(Y)</code></pre><p>Extract the derivative of an automatic differentiation object (or <code>SArray</code> of such), where the variation was created by the syntax <code>variate{P}</code>.</p><p>See also: <a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>constants</code></a>, <a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>variate</code></a>, <a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Œ¥</code></a>, <a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>value</code></a>, <a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>VALUE</code></a>, <a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>value_‚àÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L156-L168">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùîπ" href="#Muscade.ùîπ"><code>Muscade.ùîπ</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùîπ (\bbB)</code></pre><p>an alias for <code>Bool</code>. For use in dispatching. <code>ùîπ1</code>... <code>ùîπ4</code> are <code>AbstractArrays</code> of dimensions 1 to 4.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L10-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùïì" href="#Muscade.ùïì"><code>Muscade.ùïì</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùïì (\bbb)</code></pre><p>an alias for <code>Bool</code>. For use in <code>struct</code> definitions. <code>ùïì1</code>... <code>ùïì4</code> are <code>Arrays</code> of dimensions 1 to 4.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L51-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùïî" href="#Muscade.ùïî"><code>Muscade.ùïî</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùïî (\bbc)</code></pre><p>an alias for <code>Complex{Float64}</code>. For use in <code>struct</code> definitions. <code>ùïî1</code>... <code>ùïî4</code> are <code>Arrays</code> of dimensions 1 to 4. <code>ùïî11</code> is a <code>Vector</code> of <code>Vector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L81-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùïü" href="#Muscade.ùïü"><code>Muscade.ùïü</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùïü (\bbn)</code></pre><p>an alias for <code>UInt64</code>. For use in <code>struct</code> definitions. <code>ùïü1</code>... <code>ùïü4</code> are <code>Arrays</code> of dimensions 1 to 4.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L58-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùï£" href="#Muscade.ùï£"><code>Muscade.ùï£</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùï£ (\bbr)</code></pre><p>an alias for <code>Float64</code>. For use in <code>struct</code> definitions. <code>ùï£1</code>... <code>ùï£4</code> are <code>Arrays</code> of dimensions 1 to 4. <code>ùï£11</code> is a <code>Vector</code> of <code>Vector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L73-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùï´" href="#Muscade.ùï´"><code>Muscade.ùï´</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùï´ (\bbz)</code></pre><p>an alias for <code>Int64</code>. For use in <code>struct</code> definitions. <code>ùï´1</code>... <code>ùï´4</code> are <code>Arrays</code> of dimensions 1 to 4. <code>ùï´11</code> is a <code>Vector</code> of <code>Vector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L65-L71">source</a></section></article><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.:‚àò‚ÇÅ-Tuple{Any, Any}" href="#Muscade.:‚àò‚ÇÅ-Tuple{Any, Any}"><code>Muscade.:‚àò‚ÇÅ</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">c = a‚àò‚ÇÅb</code></pre><p>Compute the single-dot product of two arrays, so that <code>c·µ¢‚±º=Œ£‚Çñ a·µ¢‚Çñ b‚Çñ‚±º</code> where <code>i</code> and <code>j</code> can be multiple indices.</p><p>See also: <a href="reference.html#Muscade.:‚äó-Tuple{Any, Any}"><code>‚äó</code></a>,<a href="reference.html#Muscade.:‚àò‚ÇÇ-Tuple{Any, Any}"><code>‚àò‚ÇÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dots.jl#L5-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.:‚àò‚ÇÇ-Tuple{Any, Any}" href="#Muscade.:‚àò‚ÇÇ-Tuple{Any, Any}"><code>Muscade.:‚àò‚ÇÇ</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">c = a‚àò‚ÇÇb</code></pre><p>Compute the double-dot product of two arrays, so that <code>c·µ¢‚±º=Œ£‚Çñ‚Çó a·µ¢‚Çñ‚Çó b‚Çñ‚Çó‚±º</code> where <code>i</code> and <code>j</code> can be multiple indices.</p><p>See also: <a href="reference.html#Muscade.:‚àò‚ÇÅ-Tuple{Any, Any}"><code>‚àò‚ÇÅ</code></a>,<a href="reference.html#Muscade.:‚äó-Tuple{Any, Any}"><code>‚äó</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dots.jl#L13-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.:‚äó-Tuple{Any, Any}" href="#Muscade.:‚äó-Tuple{Any, Any}"><code>Muscade.:‚äó</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">c = a‚äób</code></pre><p>Compute the exterior product of two arrays, so that <code>c·µ¢‚±º=a·µ¢ b‚±º</code> where <code>i</code> and <code>j</code> can be multiple indices.</p><p>See also: <a href="reference.html#Muscade.:‚àò‚ÇÅ-Tuple{Any, Any}"><code>‚àò‚ÇÅ</code></a>,<a href="reference.html#Muscade.:‚àò‚ÇÇ-Tuple{Any, Any}"><code>‚àò‚ÇÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dots.jl#L22-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.McLaurin-Tuple{Tuple, Any}" href="#Muscade.McLaurin-Tuple{Tuple, Any}"><code>Muscade.McLaurin</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">McLaurin(Ty,x)</code></pre><p><code>Ty::‚àÇ‚Ñù</code> has partials to arbitrary order with respect to a variable <code>x</code>. These partials define a McLaurin expansion, which <code>McLaurin</code> evaluates at value <code>x</code>,  as if <code>Ty</code> had been computed at 0.</p><p><code>McLaurin</code> handles nested structures of <code>Tuple</code>s and <code>SVector</code>s of <code>‚àÇ‚Ñù</code>, applying the expansion to each element.</p><p><code>McLaurin</code> is a utility function behind <a href="reference.html#Muscade.compose-Tuple{Any, Any}"><code>compose</code></a> and <a href="reference.html#Muscade.Taylor-Tuple{Tuple, Any, Any}"><code>Taylor</code></a></p><p>See also: <a href="reference.html#Muscade.compose-Tuple{Any, Any}"><code>compose</code></a>, <a href="reference.html#Muscade.Taylor-Tuple{Tuple, Any, Any}"><code>Taylor</code></a>, <a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>revariate</code></a>, <a href="reference.html#Muscade.fast-Tuple{Any, Any}"><code>fast</code></a>    </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L93-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.QuadraticFunction-Tuple{Float64, Float64}" href="#Muscade.QuadraticFunction-Tuple{Float64, Float64}"><code>Muscade.QuadraticFunction</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">f  = QuadraticFunction(Œº,œÉ)</code></pre><p>where <code>Œº</code> and <code>œÉ</code> are <code>ùï£</code> (<code>Float64</code>)</p><pre><code class="nohighlight hljs">y  = f(x) # == 1/2*((x-Œº)/œÉ)^2

f  = QuadraticFunction(Œº,œÉ)</code></pre><p>where <code>Œº</code> is a <code>Function</code> of time</p><pre><code class="nohighlight hljs">y  = f(x,t) # == 1/2*((x-Œº(t))/œÉ)^2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Functors.jl#L32-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.Taylor-Tuple{Tuple, Any, Any}" href="#Muscade.Taylor-Tuple{Tuple, Any, Any}"><code>Muscade.Taylor</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Taylor(Ty,x‚ÇÄ,x)</code></pre><p><code>Ty::‚àÇ‚Ñù</code> has partials to arbitrary order evaluated at <code>x‚ÇÄ</code>. These partials define a Taylor expansion, which <code>Taylor</code> evaluates at value <code>x</code></p><p><code>Taylor</code> handles nested structures of <code>Tuple</code>s and <code>SVector</code>s of <code>‚àÇ‚Ñù</code>, applying the expansion to each element.</p><p>See also: <a href="reference.html#Muscade.compose-Tuple{Any, Any}"><code>compose</code></a>, <a href="reference.html#Muscade.McLaurin-Tuple{Tuple, Any}"><code>McLaurin</code></a>, <a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>revariate</code></a>, <a href="reference.html#Muscade.fast-Tuple{Any, Any}"><code>fast</code></a>    </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L115-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.VALUE-Tuple{Nothing}" href="#Muscade.VALUE-Tuple{Nothing}"><code>Muscade.VALUE</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@show VALUE(Y)</code></pre><p>Completely strip <code>Y</code> of partial derivatives.  Use only for debugging purpose.    </p><p>See also: <a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>constants</code></a>, <a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>variate</code></a>, <a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Œ¥</code></a>, <a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>value</code></a>, <a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>‚àÇ</code></a>, <a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>value_‚àÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L127-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement" href="#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>Muscade.addelement!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">eleid = addelement!(model,ElType,nodid;kwargs...)</code></pre><p>Add one or several elements to <code>model</code>, connecting them to the nodes specified  by <code>nodid</code>.</p><p>If <code>nodid</code> is an <code>AbstractVector</code>: add a single element to the model. <code>eleid</code> is then a single element identifier.</p><p>If <code>nodid</code> is an <code>AbstractMatrix</code>: add multiple elements to the model. Each  row of <code>nodid</code> identifies the node of a single element. <code>eleid</code> is then  a vector of element identifiers.</p><p>For each element, <code>addelement!</code> will call <code>eleobj = ElType(nodes;kwargs...)</code> where <code>nodes</code> is a vector of nodes of the element.</p><p>See also: <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>describe</code></a>, <a href="reference.html#Muscade.coord-Tuple{AbstractVector{Node}}"><code>coord</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L165-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.addin!-Union{Tuple{Ti}, Tuple{Tv}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64, Real}} where {Tv, Ti&lt;:Integer}" href="#Muscade.addin!-Union{Tuple{Ti}, Tuple{Tv}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64, Real}} where {Tv, Ti&lt;:Integer}"><code>Muscade.addin!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">addin!(asm,global,block,ibr,ibc,factor=1.)</code></pre><p>Add a sparse <code>block</code> into a large <code>out</code> sparse matrix, at block-row and -column <code>ibr</code> and <code>ibc</code>.      Use <a href="reference.html#Muscade.prepare-Union{Tuple{SparseArrays.SparseMatrixCSC{SparseArrays.SparseMatrixCSC{Tv, Int64}, Int64}}, Tuple{Tv}} where Tv"><code>prepare</code></a> to allocate memory for <code>global</code> and build the assembler <code>asm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SparseTools.jl#L95-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.addin!-Union{Tuple{Tv}, Tuple{Vector{Int64}, AbstractVector{Tv}, Vector{Tv}, Int64}, Tuple{Vector{Int64}, AbstractVector{Tv}, Vector{Tv}, Int64, Real}} where Tv" href="#Muscade.addin!-Union{Tuple{Tv}, Tuple{Vector{Int64}, AbstractVector{Tv}, Vector{Tv}, Int64}, Tuple{Vector{Int64}, AbstractVector{Tv}, Vector{Tv}, Int64, Real}} where Tv"><code>Muscade.addin!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">addin!(asm,outvec,blockvec,ibr)</code></pre><p>Add a full <code>block</code> vector into a large <code>outvec</code> full vector.  at block-row <code>ibr</code>. Use <a href="reference.html#Muscade.prepare-Union{Tuple{SparseArrays.SparseMatrixCSC{SparseArrays.SparseMatrixCSC{Tv, Int64}, Int64}}, Tuple{Tv}} where Tv"><code>prepare</code></a> to create <code>asm</code>.</p><p>See also: <a href="reference.html#Muscade.prepare-Union{Tuple{SparseArrays.SparseMatrixCSC{SparseArrays.SparseMatrixCSC{Tv, Int64}, Int64}}, Tuple{Tv}} where Tv"><code>prepare</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SparseTools.jl#L125-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}" href="#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>Muscade.addnode!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nodid = addnode!(model,coord)</code></pre><p>If <code>coord</code> is an <code>AbstractVector</code> of <code>Real</code>: add a single node to the model.   Muscade does not prescribe what coordinate system to use.  Muscade will handle  to each element the <code>coord</code> of the nodes of the element, and the element  constructor must be able to make sense of it. <code>nodid</code> is a node identifier, that is used as input to <code>addelement!</code>.</p><p>If <code>coord</code> is an <code>AbstractMatrix</code>, its rows are treated as vectors of coordinates. <code>nodid</code> is then a vector of node identifiers.</p><p>See also: <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.coord-Tuple{AbstractVector{Node}}"><code>coord</code></a> , <a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>describe</code></a> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L140-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.compose-Tuple{Any, Any}" href="#Muscade.compose-Tuple{Any, Any}"><code>Muscade.compose</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compose(Ty,x)</code></pre><p>Compose automatic differentiation.  For example      Tx = revariate(x)     Ty = f(Tx)     y  = compose(Ty,x)     is faster than     y  = f(x) if the length of <code>x</code> is smaller than the length of its partials.</p><p>See also: <a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>revariate</code></a>, <a href="reference.html#Muscade.fast-Tuple{Any, Any}"><code>fast</code></a>    </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L128-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.constants-Tuple{Tuple}" href="#Muscade.constants-Tuple{Tuple}"><code>Muscade.constants</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">P = constants(a,b,c)</code></pre><p>Generate a precedence <code>P</code> that is higher than the precedence of the arguments.   </p><p>See also: <a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>variate</code></a>, <a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Œ¥</code></a>, <a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>value</code></a>, <a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>‚àÇ</code></a>, <a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>VALUE</code></a>, <a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>value_‚àÇ</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Adiff.jl#L74-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.coord-Tuple{AbstractVector{Node}}" href="#Muscade.coord-Tuple{AbstractVector{Node}}"><code>Muscade.coord</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">c = coord(node)</code></pre><p>Used by element constructors to obtain the coordinates of a vector of Nodes handed by Muscade to the constructor. <code>c</code> is accessed as </p><pre><code class="nohighlight hljs">c[inod][icoord]</code></pre><p>where <code>inod</code> is the element-node number and <code>icoord</code> an index into a vector of coordinates.</p><p>Note that <code>c[inod]</code> points at the same memory as <code>nod[inod].coord</code>: do not mutate <code>c[inod]</code>!</p><p>See also: <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>describe</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L62-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.describe-Tuple{Model, Muscade.EleID}" href="#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>Muscade.describe</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">describe(model,spec)</code></pre><p>Print out information about <code>model</code>. <code>spec</code> can be </p><ul><li>an <code>EleID</code> to describe an element,</li><li>a <code>DofID</code> to describe a dof.</li><li>a <code>NodID</code> to describe a node,</li><li><code>:doftyp</code> to obtain a list of doftypes, </li><li><code>:dof</code> to obtain a list of dofs or </li><li><code>:eletyp</code> for a list of element types.</li></ul><p>See also: <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Diagnostic.jl#L3-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.describe-Tuple{Muscade.State}" href="#Muscade.describe-Tuple{Muscade.State}"><code>Muscade.describe</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">describe(state;class=:all)</code></pre><p>Provide a description of the dofs stored in <code>state</code>. <code>class</code> can be either <code>:all</code>, <code>:Œõ</code>, <code>:ŒõX</code>, <code>:X</code>, <code>:U</code>, <code>:A</code> or <code>:scale</code></p><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Diagnostic.jl#L526-L533">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.diffed_lagrangian-Tuple{eletyp} where eletyp&lt;:AbstractElement" href="#Muscade.diffed_lagrangian-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>Muscade.diffed_lagrangian</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">diffed_lagrangian(eleobj;Œõ,X,U,A,t=0,SP=nothing)</code></pre><p>Compute the Lagrangian, its gradients and Hessian, and the memory of an element. For element debugging and testing. </p><p>The output is a <code>NamedTuple</code> with fields <code>Œõ</code>, <code>X</code>, <code>U</code>, <code>A</code>, <code>t</code>, <code>SP</code> echoing the inputs and fields</p><ul><li><code>‚àáL</code> of format <code>‚àáL[iclass][ider]</code>so that for example <code>‚àáL[2][3]</code> contains the gradient of the Lagrangian wrt to the acceleration.  <code>iclass</code> is 1,2,3 and 4 for <code>Œõ</code>, <code>X</code>, <code>U</code> and <code>A</code> respectively.</li><li><code>HL</code> of format <code>HL[iclass,jclass][ider,jder]</code>so that for example <code>HL[1,2][1,3]</code> contains the mass matrix.</li><li><code>FB</code> as returned by <code>lagrangian</code></li></ul><p>See also: <a href="reference.html#Muscade.diffed_residual-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>diffed_residual</code></a>, <a href="reference.html#Muscade.print_element_array-Tuple{AbstractElement, Symbol, AbstractVector}"><code>print_element_array</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementTestTools.jl#L37-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.diffed_residual-Tuple{eletyp} where eletyp&lt;:AbstractElement" href="#Muscade.diffed_residual-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>Muscade.diffed_residual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">diffed_residual(eleobj;X,U,A,t=0,SP=nothing)</code></pre><p>Compute the residual, its gradients, and the memory of an element. For element debugging and testing. </p><p>The output is a <code>NamedTuple</code> with fields <code>X</code>, <code>U</code>, <code>A</code>, <code>t</code>, <code>SP</code> echoing the inputs and fields</p><ul><li><code>R</code> containing the residual</li><li><code>‚àáR</code> of format <code>‚àáR[iclass][ider]</code>so that for example <code>‚àáR[2][3]</code> contains the mass matrix.  <code>iclass</code> is 2,3 and 4 for <code>X</code>, <code>U</code> and <code>A</code> respectively.</li><li><code>FB</code> as returned by <code>residual</code></li></ul><p>See also: <a href="reference.html#Muscade.diffed_lagrangian-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>diffed_lagrangian</code></a>, <a href="reference.html#Muscade.print_element_array-Tuple{AbstractElement, Symbol, AbstractVector}"><code>print_element_array</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementTestTools.jl#L97-L110">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.doflist-Union{Tuple{Type{E}}, Tuple{E}} where E&lt;:AbstractElement" href="#Muscade.doflist-Union{Tuple{Type{E}}, Tuple{E}} where E&lt;:AbstractElement"><code>Muscade.doflist</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Muscade.doflist(::Type{E&lt;:AbstractElement})</code></pre><p>Elements must overload Muscade&#39;s <code>doflist</code> function.   The method must take the element type as only input, and return a <code>NamedTuple</code> with fieldnames <code>inod</code>,<code>class</code> and <code>field</code>.  The tuple-fields are <code>NTuple</code>s of the same length.  For example</p><pre><code class="nohighlight hljs">Muscade.doflist( ::Type{&lt;:Turbine}) = (inod =(1   ,1   ,2        ,2        ),
                                       class=(:X  ,:X  ,:A       ,:A       ),
                                       field=(:tx1,:tx2,:Œîseadrag,:Œîskydrag))</code></pre><p>In <code>Œõ</code>, <code>X</code>, <code>U</code> and <code>A</code> handed by Muscade to <code>residual</code> or <code>lagrangian</code>, the dofs in the vectors will follow the order in the doflist. Element developers are free to number their dofs by node, by field, or in any other way.</p><p>See also: <a href="reference.html#Muscade.lagrangian-Tuple{}"><code>lagrangian</code></a>, <a href="DryFriction.html#residual"><code>residual</code></a>, <a href="reference.html#Muscade.nosecondorder-Tuple{Type{&lt;:AbstractElement}}"><code>nosecondorder</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L79-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.draw-Tuple{Any, Muscade.State, Vector{Muscade.EleID}}" href="#Muscade.draw-Tuple{Any, Muscade.State, Vector{Muscade.EleID}}"><code>Muscade.draw</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">draw(state[,els];kwargs...)</code></pre><p><code>state</code> a single <code>State</code>. <code>els</code> specifies which elements to draw and can be either</p><ul><li>a vector of <code>EleID</code>s (obtained from <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>`), all corresponding to the same concrete element type</li><li>a concrete element type (see <a href="reference.html#Muscade.eletyp-Tuple{Model}"><code>eletyp</code></a>).</li><li>omitted: all the element of the model are drawn.</li></ul><p><code>kwargs...</code> is any additional key words arguments that will be passed to the <code>draw</code> method of each element,  for example to specify colors, etc.  See the elements&#39; documentation.</p><p>See also: <a href="reference.html#Muscade.getdof-Tuple{Muscade.State}"><code>getdof</code></a>, <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>, <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SelfDraw.jl#L27-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.draw-Union{Tuple{E}, Tuple{Any, AbstractVector{E}, Vararg{Any}}} where E&lt;:AbstractElement" href="#Muscade.draw-Union{Tuple{E}, Tuple{Any, AbstractVector{E}, Vararg{Any}}} where E&lt;:AbstractElement"><code>Muscade.draw</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>For parametric element types     Muscade.draw(axe,o::AbstractVector{Teleobj}, Œõ,X,U,A,t,SP,dbg;kwargs...) where{Teleobj&lt;:MyElement} For non-parametric element types, one can simplify the above to:     Muscade.draw(axe,o::AbstractVector{MyElement}, Œõ,X,U,A,t,SP,dbg;kwargs...)</p><p>Inputs are:</p><ul><li><code>axe</code>, a <code>GLMakie</code> axe</li><li><code>o</code> a <code>AbstractVector</code> of element objects, of length <code>nel</code>.</li><li><code>Œõ</code> a matrix of size <code>(nXdof,nel)</code></li><li><code>X</code> a <code>NTuple</code> (over the derivatives) of matrices of size <code>(nXdof,nel)</code></li><li><code>U</code> a <code>NTuple</code> (over the derivatives) of matrices of size <code>(nUdof,nel)</code></li><li><code>A</code> a matrix of size <code>(nAdof,nel)</code></li><li><code>t</code> time</li><li><code>SP</code> solver parameters</li><li><code>dbg</code> debuging information</li><li><code>kwargs</code> a <code>NamedTuple</code> containing the keyword arguments provided by the user. See <a href="reference.html#Muscade.default"><code>default</code></a>.</li></ul><p>See also: <a href="reference.html#Muscade.lagrangian-Tuple{}"><code>lagrangian</code></a>, <a href="DryFriction.html#residual"><code>residual</code></a>, <a href="DryFriction.html#doflist"><code>doflist</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L168-L187">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.eletyp-Tuple{Model}" href="#Muscade.eletyp-Tuple{Model}"><code>Muscade.eletyp</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">et = eletyp(model)</code></pre><p>Return a vector of the concrete types of elements in the model. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Output.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.equal-Tuple{Any}" href="#Muscade.equal-Tuple{Any}"><code>Muscade.equal</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">equal(t) ‚Üí :equal</code></pre><p>A function which for any value <code>t</code> returns the symbol <code>equal</code>.  Usefull for specifying the keyword argument <code>mode=equal</code> in adding an element of type `<code>DofConstraint</code> to a <code>Model</code>.</p><p>See also: <a href="reference.html#Muscade.DofConstraint"><code>DofConstraint</code></a>, <a href="reference.html#Muscade.ElementConstraint"><code>ElementConstraint</code></a>, <a href="reference.html#Muscade.off-Tuple{Any}"><code>off</code></a>, <a href="reference.html#Muscade.positive-Tuple{Any}"><code>positive</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L265-L273">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.fast-Tuple{Any, Any}" href="#Muscade.fast-Tuple{Any, Any}"><code>Muscade.fast</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">y,... = fast(f,x)</code></pre><p>In the context of forward automatic differentiation using <code>‚àÇ‚Ñù</code>, accelerate the evaluation of <code>y,...= f(x)</code> if the length of <code>x</code> is smaller than the length of its partials.</p><p>Be extremely careful with closures, making sure that <code>f</code> does not capture variables of type <code>‚àÇ‚Ñù</code>.</p><p>Wrapper function of <a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>revariate</code></a> and <a href="reference.html#Muscade.McLaurin-Tuple{Tuple, Any}"><code>McLaurin</code></a>      </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Taylor.jl#L143-L152">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.findlastassigned-Tuple{Vector}" href="#Muscade.findlastassigned-Tuple{Vector}"><code>Muscade.findlastassigned</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ilast = findlastassigned(state)</code></pre><p>Find the index <code>ilast</code> of the element before the first non assigment element in a vector <code>state</code>.</p><p>In multistep analyses, <code>solve</code> returns a vector <code>state</code> of length equal to the number of steps requested by the user.  If the analysis is aborted, <code>solve</code> still returns any available results at the begining of <code>state</code>, and the vector <code>state[1:ilast]</code> is fully assigned.</p><p>See also: <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Output.jl#L183-L193">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.getdof-Tuple{Muscade.State}" href="#Muscade.getdof-Tuple{Muscade.State}"><code>Muscade.getdof</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dofres = getdof(state;[class=:X],field=:somefield,nodID=[nodids...],[order=0])</code></pre><p>Obtain the value of dofs of the same class and field, at various nodes and for various states.</p><p>If <code>state</code> is a vector, the output <code>dofres</code> has size <code>(ndof,nstate)</code>. If <code>state</code> is a scalar, the output <code>dofres</code> has size <code>(ndof,)</code>.</p><p>See also: <a href="reference.html#Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State"><code>getresult</code></a>, <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Output.jl#L11-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.getndof-Tuple{DataType}" href="#Muscade.getndof-Tuple{DataType}"><code>Muscade.getndof</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getndof(model|Element)
getndof(model|Element,class)
getndof(model|Element,(class1,class2,[,...]))</code></pre><p>where <code>class</code> can be any of <code>:X</code>, <code>:U</code>, <code>:A</code>: get the number of dofs of each specified dof-classes for the variable <code>model</code> or the type <code>Element</code>.  If no class is specified <code>getndof</code> return the asum of the number of dofs of all classes.</p><p>See also: <a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>describe</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L93-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State" href="#Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State"><code>Muscade.getresult</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">eleres = getresult(state,req,els)</code></pre><p>Obtain an array of nested <code>NamedTuples</code> and <code>NTuples</code> of element results. <code>req</code> is a request defined using <code>@request</code>. <code>state</code> a vector of <code>State</code>s or a single <code>State</code>. <code>els</code> can be either</p><ul><li>a vector of <code>EleID</code>s (obtained from <code>addelement!</code>) all corresponding to the same concrete element type</li><li>a concrete element type (see <a href="reference.html#Muscade.eletyp-Tuple{Model}"><code>eletyp</code></a>).</li></ul><p>If <code>state</code> is a vector, the output <code>dofres</code> has size <code>(nele,nstate)</code>. If <code>state</code> is a scalar, the output <code>dofres</code> has size <code>(nele)</code>.</p><p>See also: <a href="reference.html#Muscade.getdof-Tuple{Muscade.State}"><code>getdof</code></a>, <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>, <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a>, <a href="reference.html#Muscade.eletyp-Tuple{Model}"><code>eletyp</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Output.jl#L142-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.getsomedofs-Union{Tuple{Nder}, Tuple{Tuple{Vararg{StaticArraysCore.SVector, Nder}}, Any}} where Nder" href="#Muscade.getsomedofs-Union{Tuple{Nder}, Tuple{Tuple{Vararg{StaticArraysCore.SVector, Nder}}, Any}} where Nder"><code>Muscade.getsomedofs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rotations = getsomedofs(X,[3,6])</code></pre><p>Used by elements&#39; <code>residual</code> or <code>lagrangian</code> to some degrees of freedom, and their time derivatives, from the variables <code>X</code> and <code>U</code>. </p><p>See also: <a href="reference.html#Muscade.‚àÇ0-Tuple{Any}"><code>‚àÇ0</code></a>,<a href="reference.html#Muscade.‚àÇ1-Tuple{Any}"><code>‚àÇ1</code></a>,<a href="reference.html#Muscade.‚àÇ2-Tuple{Any}"><code>‚àÇ2</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L50-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.getŒ¥t-Tuple{Any, Any}" href="#Muscade.getŒ¥t-Tuple{Any, Any}"><code>Muscade.getŒ¥t</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getŒ¥t(n,Œ¥œâ) = 2œÄ/(n*Œ¥œâ)

`n` is the length of the time series</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/FFT.jl#L225-L230">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.getŒ¥œâ-Tuple{Any, Any}" href="#Muscade.getŒ¥œâ-Tuple{Any, Any}"><code>Muscade.getŒ¥œâ</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Œ¥œâ=getŒ¥œâ(n,Œ¥t) = 2œÄ/(n*Œ¥t)

`n` is the length of the time series</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/FFT.jl#L219-L223">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.imod-Tuple{Integer, Any}" href="#Muscade.imod-Tuple{Integer, Any}"><code>Muscade.imod</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">imod(i,n) = mod(i-1,n)+1</code></pre><p>For <code>i::‚Ñ§</code>, returns a value in <code>{1,...n}</code>.  This differs from <code>mod</code> which return a value in <code>[0,n[</code>   </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L260-L265">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.initialize!-Tuple{Model}" href="#Muscade.initialize!-Tuple{Model}"><code>Muscade.initialize!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialstate = initialize!(model)</code></pre><p>Return an initial <code>State</code> for the model with all dofs set to zero</p><p>Modifying a model (invoquing <code>addnode!</code> and <code>addelement!</code> after <code>initialize!</code> will result in an error) </p><p>Optional keyword arguments: <code>nŒõder=1</code>, <code>nXder=1</code>, <code>nUder=1</code> to specify the number of &quot;derivatives&quot; to store in the <code>State</code>.   note that &quot;<code>n‚ãÖder==order+1</code>&quot;, that is, for a dynamic problem (with accelerations), <code>nXder=3</code> so that   <code>order==2</code>.  Setting  <code>n‚ãÖder</code> is only required if <a href="reference.html#Muscade.setdof!-Tuple{Muscade.State, Vector{Float64}}"><code>setdof!</code></a> will be used.  A dynamic solver   handles a &quot;static&quot; initial state perfectly well. <code>time=-‚àû</code> the time associated to the initial state.  Note that for example setting <code>time=0.</code>, and then calling a solver with a first time step also at <code>0.</code> causes an error.  </p><p>See also: <a href="reference.html#Muscade.setdof!-Tuple{Muscade.State, Vector{Float64}}"><code>setdof!</code></a>, <a href="reference.html#Muscade.Model"><code>Model</code></a>, <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>addelement!</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L290-L306">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.lagrangian-Tuple{}" href="#Muscade.lagrangian-Tuple{}"><code>Muscade.lagrangian</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@espy function Muscade.lagrangian(eleobj::MyElement,Œõ,X,U,A,t,SP,dbg)
    ...
    return L,FB
end</code></pre><p><strong>Inputs</strong></p><ul><li><code>eleobj</code> an element object</li><li><code>Œõ</code> a <code>SVector{nXdof,R} where{R&lt;:Real}</code>, Lagrange multipliers (aka <code>Œ¥X</code> virtual displacements).</li><li><code>X</code> a <code>NTuple</code> of <code>SVector{nXdof,R} where{R&lt;:Real}</code>, containing the Xdofs and, depending on the solver,  their time derivatives. Use <code>x=‚àÇ0(X)</code>, <code>v=‚àÇ1(X)</code> and <code>a=‚àÇ2(X)</code> to safely obtain vectors of zeros  where the solver leaves time derivatives undefined.</li><li><code>U</code> a <code>NTuple</code> of <code>SVector{nUdof,R} where{R&lt;:Real}</code>, containing the Udofs and, depending on the solver,  their time derivatives. Use <code>u=‚àÇ0(U)</code>, <code>Ãáu=‚àÇ1(U)</code> and <code>Ãàu=‚àÇ2(U)</code> to safely obtain vectors of zeros  where the solver leaves time derivatives undefined.</li><li><code>A</code> a <code>SVector{nAdof,R} where{R&lt;:Real}</code>.</li><li><code>t</code> a `<code>Real</code> containing the time.</li><li><code>SP</code> solver parameters (for example: the barrier parameter <code>Œ≥</code> for  interior point methods).</li><li><code>dbg</code> a <code>NamedTuple</code> to be used <em>only</em> for debugging purposes.</li></ul><p><strong>Outputs</strong></p><ul><li><code>L</code> the lagrangian</li><li><code>FB</code> feedback from the element to the solver (for example: can <code>Œ≥</code> be  reduced?). Return <code>noFB</code> of the element has no feedback to provide.</li></ul><p>See also: <a href="DryFriction.html#residual"><code>residual</code></a>, <a href="DryFriction.html#doflist"><code>doflist</code></a>, <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, <a href="reference.html#Muscade.‚àÇ0-Tuple{Any}"><code>‚àÇ0</code></a>, <a href="reference.html#Muscade.‚àÇ1-Tuple{Any}"><code>‚àÇ1</code></a>, <a href="reference.html#Muscade.‚àÇ2-Tuple{Any}"><code>‚àÇ2</code></a>, <a href="reference.html#Muscade.noFB"><code>noFB</code></a>, </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L109-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.merge-Tuple{Any}" href="#Muscade.merge-Tuple{Any}"><code>Muscade.merge</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">req = Muscade.merge(o.req)</code></pre><p>Elements like <a href="reference.html#Muscade.ElementCost"><code>ElementCost</code></a> and <a href="reference.html#Muscade.ElementConstraint"><code>ElementConstraint</code></a> use requests to apply a cost or a constraint to requestables from another &quot;target&quot; element. These cost/constraint elements must be coded carefully so that <code>getresult</code> can be used to extracted both requestable internal results from the cost/constraint and from the target element.</p><p><code>merge</code> (which is <em>not exported by Muscade</em>) is used to merge the requests for the request needed to enforce a cost or constraint, and the user&#39;s  request for element to be obtained from the analysis.  The call to <code>merge</code>, to be inserted in the code of <code>lagrange</code> for the cost/constraint element will be modified by <code>@espy</code>.  </p><p>See the code of <code>ElementCost</code>&#39;s constructor and <code>lagrange</code> method for an example.</p><p>See also: <a href="reference.html#Muscade.ElementCost"><code>ElementCost</code></a>,<a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>,<a href="reference.html#Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State"><code>getresult</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Espy.jl#L60-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.muscadeerror-Tuple{NamedTuple, Any}" href="#Muscade.muscadeerror-Tuple{NamedTuple, Any}"><code>Muscade.muscadeerror</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">muscadeerror([[dbg,]msg])</code></pre><p>Throw a <code>MuscadeException</code>, where</p><ul><li><code>dbg</code> is a <code>NamedTuple</code> that contains &quot;location information&quot;</li></ul><p>(for example: solver, step, iteration, element, quadrature point) that will be displayed with the error message.</p><ul><li><code>msg</code> is a <code>String</code> describing the problem.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Exceptions.jl#L6-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.nosecondorder-Tuple{Type{&lt;:AbstractElement}}" href="#Muscade.nosecondorder-Tuple{Type{&lt;:AbstractElement}}"><code>Muscade.nosecondorder</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nosecondorder(::Type{E&lt;:AbstractElement})</code></pre><p>Elements that define <code>residual</code> which would give excessive compilation and/or execution time if differentiated to the second order should provide a flag to limit differentiation to first order by implementing:   </p><pre><code class="nohighlight hljs">Muscade.nosecondorder(     ::Type{&lt;:MyElementType}) = Val(true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L99-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.off-Tuple{Any}" href="#Muscade.off-Tuple{Any}"><code>Muscade.off</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">off(t) ‚Üí :off</code></pre><p>A function which for any value <code>t</code> returns the symbol <code>off</code>.  Usefull for specifying the keyword argument <code>mode=off</code> in adding an element of type `<code>DofConstraint</code> to a <code>Model</code>.</p><p>See also: <a href="reference.html#Muscade.DofConstraint"><code>DofConstraint</code></a>, <a href="reference.html#Muscade.ElementConstraint"><code>ElementConstraint</code></a>, <a href="reference.html#Muscade.equal-Tuple{Any}"><code>equal</code></a>, <a href="reference.html#Muscade.positive-Tuple{Any}"><code>positive</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L255-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.positive-Tuple{Any}" href="#Muscade.positive-Tuple{Any}"><code>Muscade.positive</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">positive(t) ‚Üí :positive</code></pre><p>A function which for any value <code>t</code> returns the symbol <code>positive</code>.  Usefull for specifying the keyword argument <code>mode=positive</code> in adding an element of type `<code>DofConstraint</code> to a <code>Model</code>.</p><p>See also: <a href="reference.html#Muscade.DofConstraint"><code>DofConstraint</code></a>, <a href="reference.html#Muscade.ElementConstraint"><code>ElementConstraint</code></a>, <a href="reference.html#Muscade.off-Tuple{Any}"><code>off</code></a>, <a href="reference.html#Muscade.equal-Tuple{Any}"><code>equal</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/BasicElements.jl#L275-L283">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.prepare-Union{Tuple{SparseArrays.SparseMatrixCSC{SparseArrays.SparseMatrixCSC{Tv, Int64}, Int64}}, Tuple{Tv}} where Tv" href="#Muscade.prepare-Union{Tuple{SparseArrays.SparseMatrixCSC{SparseArrays.SparseMatrixCSC{Tv, Int64}, Int64}}, Tuple{Tv}} where Tv"><code>Muscade.prepare</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bigmat,bigmatasm,bigvecasm,bigvecdis = prepare(pattern)</code></pre><p>Prepare for the assembly of sparse blocks into a large sparse matrix.  <code>bigmat</code> is allocated, with the correct sparsity structure, but its <code>nzval</code> undef&#39;ed.     Where some blocks share the same sparsity structure, <code>blocks</code> in <code>pattern</code> can have <code>===</code> elements.</p><p><code>pattern</code> is a <code>SparseMatrixCSC{&lt;:SparseMatrixCSC}</code>, where empty blocks are structuraly zero</p><p>See also: <a href="reference.html#Muscade.addin!-Union{Tuple{Ti}, Tuple{Tv}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64, Real}} where {Tv, Ti&lt;:Integer}"><code>addin!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SparseTools.jl#L21-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.print_element_array-Tuple{AbstractElement, Symbol, AbstractVector}" href="#Muscade.print_element_array-Tuple{AbstractElement, Symbol, AbstractVector}"><code>Muscade.print_element_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">print_element_array(eleobj,class,V)</code></pre><p>Show a vector (or a matrix) <code>V</code>, the rows of <code>V</code> being described as corresponding to <code>eleobj</code> dof of class <code>class</code>. This can be used to print degrees of freedom, residuals, their derivatives, or gradients and Hessian of the Lagrangian.</p><p>See also: <a href="reference.html#Muscade.diffed_residual-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>diffed_residual</code></a>, <a href="reference.html#Muscade.diffed_lagrangian-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>diffed_lagrangian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementTestTools.jl#L2-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.residual-Tuple{}" href="#Muscade.residual-Tuple{}"><code>Muscade.residual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>@espy function Muscade.residual(eleobj::MyElement,X,U,A,t,SP,dbg)     ...     return R,FB end</p><p><strong>Inputs</strong></p><ul><li><code>eleobj</code> an element object</li><li><code>X</code> a <code>NTuple</code> of <code>SVector{nXdof,R} where{R&lt;:Real}</code>, containing the Xdofs and, depending on the solver,  their time derivatives. Use <code>x=‚àÇ0(X)</code>, <code>v=‚àÇ1(X)</code> and <code>a=‚àÇ2(X)</code> to safely obtain vectors of zeros  where the solver leaves time derivatives undefined.</li><li><code>U</code> a <code>NTuple</code> of <code>SVector{nUdof,R} where{R&lt;:Real}</code>, containing the Udofs and, depending on the solver,  their time derivatives. Use <code>u=‚àÇ0(U)</code>, <code>Ãáu=‚àÇ1(U)</code> and <code>Ãàu=‚àÇ2(U)</code> to safely obtain vectors of zeros  where the solver leaves time derivatives undefined.</li><li><code>A</code> a <code>SVector{nAdof,R} where{R&lt;:Real}</code>.</li><li><code>t</code> a `<code>Real</code> containing the time.</li><li><code>SP</code> solver parameters (for example: the barrier parameter <code>Œ≥</code> for  interior point methods).</li><li><code>dbg</code> a <code>NamedTuple</code> to be used <em>only</em> for debugging purposes.</li></ul><p><strong>Outputs</strong></p><ul><li><code>R</code> the residual</li><li><code>FB</code> feedback from the element to the solver (for example: can <code>Œ≥</code> be  reduced?). Return <code>noFB</code> of the element has no feedback to provide.</li></ul><p>See also: <a href="reference.html#Muscade.lagrangian-Tuple{}"><code>lagrangian</code></a>, <a href="reference.html#Muscade.nosecondorder-Tuple{Type{&lt;:AbstractElement}}"><code>nosecondorder</code></a>, <a href="DryFriction.html#doflist"><code>doflist</code></a>, <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, <a href="reference.html#Muscade.‚àÇ0-Tuple{Any}"><code>‚àÇ0</code></a>, <a href="reference.html#Muscade.‚àÇ1-Tuple{Any}"><code>‚àÇ1</code></a>, <a href="reference.html#Muscade.‚àÇ2-Tuple{Any}"><code>‚àÇ2</code></a>, <a href="reference.html#Muscade.noFB"><code>noFB</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L139-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.setdof!-Tuple{Muscade.State, Vector{Float64}}" href="#Muscade.setdof!-Tuple{Muscade.State, Vector{Float64}}"><code>Muscade.setdof!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">state = setdof!(state,value        ;[class=:X],field=:somefield,                  [order=0])
state = setdof!(state,value::Vector;[class=:X],field=:somefield,nodID=[nodids...],[order=0])</code></pre><p>Set the value of dofs of the same class and field, at various nodes and for various states. There are two methods:</p><ol><li>A single <code>value</code> is applied to all relevant nodes in the model</li><li><code>value</code> and <code>nodID</code> are vectors of the same lengths, and each element in <code>value</code> is applied to the corresponding node.</li></ol><p><code>setdof!</code> is peculiar in that it modifies its input <code>state</code> variable, but must be used as a function. A call like <code>stateout = setdof!(statein,value;class=:X,field=:somefield,order=1)</code> can turn out in two ways: If the <code>state</code> already stores derivatives in <code>X</code> to order 1, then <code>statein</code> is mutated and <code>statein===stateout</code>. Otherwise, <code>statein</code> is unchanged, <code>stateout</code> is a new object, sharing as much memory as possible with <code>statein</code>. To avoid confusion, always use the syntax shown above.</p><p>See also: <a href="reference.html#Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State"><code>getresult</code></a>, <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>solve</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Output.jl#L55-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.setscale!-Tuple{Model}" href="#Muscade.setscale!-Tuple{Model}"><code>Muscade.setscale!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setscale!(model;scale=nothing,Œõscale=nothing)</code></pre><p>Provide scale value for each type (class and field) of dof in the model.   This is usued to improve the conditioning of the incremental problems and for convergence criteria. <code>scale</code> is a <code>NamedTuple</code> with fieldnames within  <code>X</code>, <code>U</code> and <code>A</code>.  Each field is itself a <code>NamedTuple</code> with fieldnames being dof fields, and value being the expected order of magnitude.</p><p>For example <code>scale = (X=(tx=10,rx=1),A=(drag=3.))</code> should be read as: X-dofs of field <code>:tx</code> are expected to be of the order of magnitude of 10m in the solution, <code>:rx</code> to be of the order of 1 radian, and A-dofs of field <code>drag</code> of the order of 3.  All other degrees of freedom are of the order of 1.</p><p>Determining scaling coefficients that improve the condition number of incremental matrices is a hard problem.</p><p><code>Œõscale</code> is a scalar. The scale of a Œõ-dof will be deemed to be the scale of the  corresponding X-dof, times <code>Œõscale</code>.</p><p>See also: <a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>addnode!</code></a>, <a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>describe</code></a>, <a href="reference.html#Muscade.coord-Tuple{AbstractVector{Node}}"><code>coord</code></a>, <a href="reference.html#Muscade.studyscale-Tuple{Muscade.State}"><code>studyscale</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ModelDescription.jl#L253-L274">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}" href="#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>Muscade.solve</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solve(Solver;dbg=(;),verbose=true,silenterror=false,kwargs...)</code></pre><p>Execute an analysis using <code>Solver</code>, and safeguard partial results in the case of error. </p><p><strong>Named arguments</strong></p><ul><li><code>dbg=(;)</code>           a named tuple to trace the call tree (for debugging)</li><li><code>verbose=true</code>      set to false to suppress printed output (for testing)</li><li><code>silenterror=false</code> set to true to suppress print out of error (for testing) </li><li><code>kwargs...</code>         Further arguments passed on to the method <code>solve</code> provided by the solver</li></ul><p>This will call the method <code>solve</code> provided by the solver with <code>solve(Solver,pstate,verbose,(dbg...,solver=Symbol(Solver));kwargs...)</code></p><p>See also: <a href="reference.html#Muscade.SweepX"><code>SweepX</code></a>, <a href="reference.html#Muscade.DirectXUA"><code>DirectXUA</code></a>, <a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>initialize!</code></a> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Solve.jl#L2-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.sparser!-Tuple{SparseArrays.SparseMatrixCSC, Function}" href="#Muscade.sparser!-Tuple{SparseArrays.SparseMatrixCSC, Function}"><code>Muscade.sparser!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sparser!(S::SparseMatrixCSC,keep::Function)</code></pre><p>Eliminate terms that do not satisfy a criteria from the storage of a sparse matrix. <code>S</code> will be mutated. <code>keep</code> is a <code>Function</code> which to an index into <code>S.nzval</code> associate <code>true</code> if storage is to be kept for this term and <code>false</code> otherwise. Alternatively, <code>keep</code> can be a <code>Vector{Bool}</code></p><p>Example</p><p><code>sparser!(S,i-&gt;abs(S.nzval[i])&gt;tol)</code> <code>sparser!(S,keep)</code> <code>sparser!([S1,S2],1e-9)</code> <code>sparser!(S1,S2],1e-9)</code></p><div class="admonition is-warning" id="Warning-5792800d629de09"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-5792800d629de09" title="Permalink"></a></header><div class="admonition-body"></div></div><p>In the first example, the <code>keep</code> <em>function</em> accesses <code>S.nzval[i]</code>, and the term is then mutated by <code>sparser!</code>.  Any criteria requiring multipe access to <em>nzval</em> must build a <code>Vector</code> before calling <code>sparser!</code>.</p><div class="admonition is-warning" id="Warning-5792800d629de09"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-5792800d629de09" title="Permalink"></a></header><div class="admonition-body"></div></div><p>Note that <code>assemble!</code> computes the <code>nzval</code> of a sparse, assumning that its sparsity structure <code>colptr</code> and <code>rowval</code> is unchanged since sparse storage was allocated by <code>asmmat</code> in <code>prepare</code>.  In other words, if applying <code>sparser!</code> directly to a <code>sparse</code> returned by <code>assemble!</code>, <code>assemble!</code> can no longer be called for this matrix. In that case,</p><ol><li>deepcopy the returned matrix</li><li>apply <code>sparser!</code> to the copy</li><li>after a new call to <code>assemble!</code> use <code>keep</code> when copying <code>nzval</code>  </li></ol><p>TODO create a method to support that </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/SparseTools.jl#L143-L171">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.studyscale-Tuple{Muscade.State}" href="#Muscade.studyscale-Tuple{Muscade.State}"><code>Muscade.studyscale</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">scale = studyscale(state;[SP=nothing],[verbose=false],[dbg=(;)])</code></pre><p>Returns a named tuple of named tuples for scaling the model, accessed as     <code>scaled.myclass.myfield</code>, for example <code>scale.X.tx1</code>.</p><div class="admonition is-info" id="Info-5587d77b356a0988"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-5587d77b356a0988" title="Permalink"></a></header><div class="admonition-body"><p>The format of <code>scale</code> is not identical to the input expected by <code>setscale!</code></p></div></div><p>If <code>verbose=true</code>, prints out a report of the analysis underlying the proposed <code>scale</code>.  The proposed scaling depends on the <code>state</code> passed as input - as it is computed for a given incremental matrix.</p><p>See also: <a href="reference.html#Muscade.setscale!-Tuple{Model}"><code>setscale!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Diagnostic.jl#L205-L218">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.studysingular-Tuple{Muscade.State}" href="#Muscade.studysingular-Tuple{Muscade.State}"><code>Muscade.studysingular</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">matrix = studysingular(state;SP,[iclasses=(Œõ,:X,:U,:A)],[jclasses=iclasses],[verbose::ùïì=true],[dbg=(;)])</code></pre><p>Generates an incremental matrix for <code>state</code> (no time derivatives) corresponding to the classes required,  and report on the null space of the matrix.</p><p>To do so, the incremental matrix is converted to full format, limiting the applicability to small models.</p><p>The function returns the incremental matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Diagnostic.jl#L349-L358">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.toggle-Union{Tuple{Tb}, Tuple{Ta}, Tuple{Bool, Ta, Tb}} where {Ta, Tb}" href="#Muscade.toggle-Union{Tuple{Tb}, Tuple{Ta}, Tuple{Bool, Ta, Tb}} where {Ta, Tb}"><code>Muscade.toggle</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">toggle(condition,a,b)</code></pre><p>Typestable equivalent of <code>condition ? a : b</code>.   Returns a value converted to <code>promote_type(typeof(a),typeof(b))</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L151-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚àÇ0-Tuple{Any}" href="#Muscade.‚àÇ0-Tuple{Any}"><code>Muscade.‚àÇ0</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">position = ‚àÇ0(X)</code></pre><p>Used by elements&#39; <code>residual</code> or <code>lagrangian</code> to extract the zero-th order time derivative from the variables <code>X</code> and <code>U</code>.</p><p>See also: <a href="reference.html#Muscade.‚àÇ1-Tuple{Any}"><code>‚àÇ1</code></a>,<a href="reference.html#Muscade.‚àÇ2-Tuple{Any}"><code>‚àÇ2</code></a>,<a href="reference.html#Muscade.getsomedofs-Union{Tuple{Nder}, Tuple{Tuple{Vararg{StaticArraysCore.SVector, Nder}}, Any}} where Nder"><code>getsomedofs</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L16-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚àÇ1-Tuple{Any}" href="#Muscade.‚àÇ1-Tuple{Any}"><code>Muscade.‚àÇ1</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">velocity = ‚àÇ1(X)</code></pre><p>Used by elements&#39; <code>residual</code> or <code>lagrangian</code> to extract the first order time derivative from the variables <code>X</code> and <code>U</code>. Where the solver does not provide this derivative (e.g. a static solver), the output is a vector of zeros.</p><p>See also: <a href="reference.html#Muscade.‚àÇ0-Tuple{Any}"><code>‚àÇ0</code></a>,<a href="reference.html#Muscade.‚àÇ2-Tuple{Any}"><code>‚àÇ2</code></a>,<a href="reference.html#Muscade.getsomedofs-Union{Tuple{Nder}, Tuple{Tuple{Vararg{StaticArraysCore.SVector, Nder}}, Any}} where Nder"><code>getsomedofs</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L26-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.‚àÇ2-Tuple{Any}" href="#Muscade.‚àÇ2-Tuple{Any}"><code>Muscade.‚àÇ2</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">position = ‚àÇ2(X)</code></pre><p>Used by elements&#39; <code>residual</code> or <code>lagrangian</code> to extract the zero-th order time derivative from the variables <code>X</code> and <code>U</code>. Where the solver does not provide this derivative (e.g. a static solver), the output is a vector of zeros.</p><p>See also: <a href="reference.html#Muscade.‚àÇ0-Tuple{Any}"><code>‚àÇ0</code></a>,<a href="reference.html#Muscade.‚àÇ1-Tuple{Any}"><code>‚àÇ1</code></a>,<a href="reference.html#Muscade.getsomedofs-Union{Tuple{Nder}, Tuple{Tuple{Vararg{StaticArraysCore.SVector, Nder}}, Any}} where Nder"><code>getsomedofs</code></a>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/ElementAPI.jl#L37-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùîâ-Union{Tuple{R}, Tuple{AbstractVector{R}, Real}} where R&lt;:Real" href="#Muscade.ùîâ-Union{Tuple{R}, Tuple{AbstractVector{R}, Real}} where R&lt;:Real"><code>Muscade.ùîâ</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">X = ùîâ(x,Œ¥t)  # typeset with \mfrakF\Bbbr

Fourrier transform of a real time series x stored at time steps `Œ¥t` and length `2N = 2*2^p`
into a complex spectre X stored at frequency intervals `Œ¥œâ=getŒ¥œâ(2N,Œ¥t)=2œÄ/(2N*Œ¥t)`.  
The length of the spectre is `N`: only positive frequencies are stored (the Fourrier 
transform of real functions are Hermitian).

This provides a discretization of the unitary Fourrier transform, 

G(œâ) = ùîâ(g)(œâ) = 1/‚àö(2œÄ) ‚à´exp(-ùëñœât) g(t) dt

ùîâ is unitary, in the sense that
`sum(abs2.(x))*Œ¥t ‚âà 2*(sum(abs2.(X)) - abs2.(X[1])/2)*Œ¥œâ` 
(since the discrete spectre is provided for œâ‚â•0, it contains only half the energy)

# Arguments
- `x` a vector of real numbers representing a time series.  Its length must be a power of two.
- `Œ¥t` the time step of the time series

# Example

```
X   = ùîâ(x,Œ¥t) 
Œ¥œâ  = getŒ¥œâ(length(x),Œ¥t)
x‚Ä≤  = ùîâ‚Åª¬π(X,Œ¥œâ) # ‚âà x
```

See also: [`ùîâ‚Åª¬π`](@ref), [`getŒ¥œâ`](@ref), [`getŒ¥t`](@ref),</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/FFT.jl#L118-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùîâ‚Åª¬π-Union{Tuple{R}, Tuple{AbstractArray{Complex{R}, 1}, Real}} where R&lt;:Real" href="#Muscade.ùîâ‚Åª¬π-Union{Tuple{R}, Tuple{AbstractArray{Complex{R}, 1}, Real}} where R&lt;:Real"><code>Muscade.ùîâ‚Åª¬π</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">x = ùîâ‚Åª¬π(X,Œ¥œâ)  # typeset with \mfrakF\^-\^1

See [`ùîâ`](@ref)    

# Arguments
- `X` a vector of complex numbers representing one side of a spectra. Its length must be a power of two.
- `Œ¥œâ`, the angular frequency step of spectra

# Example

```
X   = ùîâ(x,Œ¥t) 
Œ¥œâ  = getŒ¥œâ(length(x),Œ¥t)
x‚Ä≤  = ùîâ‚Åª¬π(X,Œ¥œâ) # ‚âà x
```

See also: [`ùîâ‚Åª¬π`](@ref), [`getŒ¥œâ`](@ref), [`getŒ¥t`](@ref),</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/FFT.jl#L173-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.ùï´log2-Tuple{Int64}" href="#Muscade.ùï´log2-Tuple{Int64}"><code>Muscade.ùï´log2</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ùï´log2(i::ùï´)</code></pre><p>Compute the integer <code>log2</code> of an integer, fails if <code>i</code> is not a power of two.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L106-L110">source</a></section></article><h2 id="Macros"><a class="docs-heading-anchor" href="#Macros">Macros</a><a id="Macros-1"></a><a class="docs-heading-anchor-permalink" href="#Macros" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.@espy-Tuple{Any}" href="#Muscade.@espy-Tuple{Any}"><code>Muscade.@espy</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@espy function ... end</code></pre><p>From an anotated function code, generate     - &quot;clean&quot; code, in which the anotations have been deleted, and with        the call syntax <code>argout... = foo(argin...)</code>     - &quot;espying&quot; code, with added input and ouput arguments       <code>argout...,res = foo(argin...,req)</code> where <code>req</code> has been       generated using <code>@request</code> and <code>res</code> is a nested structure       of <code>NamedTuple</code>s and <code>NTuple</code>s containing the requested data.</p><p>The macro is not general: it is designed for <code>residual</code> and <code>lagrangian</code>, which for performance have to be programmed in &quot;immutable&quot; style: they must never mutate variables (this implies in particular, no adding into an array in a loop over Gauss points). So <code>@espy</code> only supports the specific programming constructs needed in this style.</p><p>The following is an example of anotated code:</p><pre><code class="nohighlight hljs">@espy function residual(x::Vector{R},y) where{R&lt;:Real}
    ngp=2
    accum = ntuple(ngp) do igp
        ‚òºz = x[igp]+y[igp]
        ‚òºs,‚òºt  = ‚òºmaterial(z)
        ‚ô¢square = s^2
        @named(s) 
    end
    r = sum(i-&gt;accum[i].s,ngp)
    return r,nothing,nothing
end</code></pre><ul><li>The keyword <code>function</code> is preceded by the macro-call <code>@espy</code>.  </li><li>The name of requestable variables is preceded by <code>‚òº</code> (<code>\sun</code>).  Such anotation must always appear on the left of an assigment. </li><li>If the name of a variable is preceded by <code>‚ô¢</code> (<code>\diamond</code>), then the variable is evaluated only if requested. Such a notation can only be used if there is only one variable left of the assignement.</li><li>The name of a function being called must be preceded by <code>‚òº</code> if the definition of the function is itself preceeded by the macro-call <code>@espy</code>.</li><li><code>for</code>-loops are not supported. <code>do</code>-loops must be used: to be efficient,  <code>residual</code> and <code>lagrangian</code> must not allocate and thus use immutables.</li><li>The keyword <code>return</code> must be explicitly used, and if must be followed the a comma separated list of output variables. Syntaxes like <code>return if...</code> are not supported.  </li></ul><p>See also: <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a>, <a href="reference.html#Muscade.@espydbg-Tuple{Any}"><code>@espydbg</code></a>, <a href="reference.html#Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State"><code>getresult</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Espy.jl#L336-L384">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.@espydbg-Tuple{Any}" href="#Muscade.@espydbg-Tuple{Any}"><code>Muscade.@espydbg</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@espydbg function ... end</code></pre><p>Generate the same code as <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a> and print it (for debug purposes).</p><p>See also: <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, <a href="reference.html#Muscade.@request-Tuple{Any}"><code>@request</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Espy.jl#L393-L399">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.@once-Tuple{Any, Any}" href="#Muscade.@once-Tuple{Any, Any}"><code>Muscade.@once</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@once tag f(x)= x^2</code></pre><p>do not parse the definition of function <code>f</code> again if not modified. Using in a script, this prevents recompilations in <code>Muscade</code> or applications based on it when they receive such functions as argument.</p><p><code>tag</code> must be a legal variable name, and unique to this invocation of <code>@once</code>  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Dialect.jl#L214-L222">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Muscade.@request-Tuple{Any}" href="#Muscade.@request-Tuple{Any}"><code>Muscade.@request</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">req = @request expr</code></pre><p>Create a request of internal results wanted from a function. Considering the function presented as example for <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, examples of possible syntax include</p><pre><code class="nohighlight hljs">req       = @request gp(s,z,material(a,b))
req       = @request gp(s)
req       = @request gp(material(a))</code></pre><p>The first expression can be read as follows: &quot;In the function, there is a <code>do</code> loop over variable <code>igp</code>, and within this loop a call to a function <code>material</code>.  Results <code>s</code> and <code>z</code> are wanted from within the loop, and results <code>a</code> and <code>b</code> from within <code>material</code>.</p><p>The corresponding datastructure containing the results for each element is a nesting of <code>NTuples</code> and <code>NamedTuples</code>,  and can be accessed as <code>out.gp[igp].material.a</code> and so forth.        </p><p>See also: <a href="reference.html#Muscade.@espy-Tuple{Any}"><code>@espy</code></a>, <a href="reference.html#Muscade.@espydbg-Tuple{Any}"><code>@espydbg</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SINTEF/Muscade.jl/blob/ee1c8866945df0cac4b39776b123eab7ba0be9bb/src/Espy.jl#L26-L47">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="reference.html#Muscade.noFB"><code>Muscade.noFB</code></a></li><li><a href="reference.html#Muscade.œµ"><code>Muscade.œµ</code></a></li><li><a href="reference.html#Muscade.‚àû"><code>Muscade.‚àû</code></a></li><li><a href="reference.html#Muscade.AbstractElement"><code>Muscade.AbstractElement</code></a></li><li><a href="reference.html#Muscade.DirectXUA"><code>Muscade.DirectXUA</code></a></li><li><a href="reference.html#Muscade.DofConstraint"><code>Muscade.DofConstraint</code></a></li><li><a href="reference.html#Muscade.DofCost"><code>Muscade.DofCost</code></a></li><li><a href="reference.html#Muscade.DofLoad"><code>Muscade.DofLoad</code></a></li><li><a href="reference.html#Muscade.EigX"><code>Muscade.EigX</code></a></li><li><a href="reference.html#Muscade.EigXU"><code>Muscade.EigXU</code></a></li><li><a href="reference.html#Muscade.ElementConstraint"><code>Muscade.ElementConstraint</code></a></li><li><a href="reference.html#Muscade.ElementCost"><code>Muscade.ElementCost</code></a></li><li><a href="reference.html#Muscade.FreqXU"><code>Muscade.FreqXU</code></a></li><li><a href="reference.html#Muscade.FunctionFromVector"><code>Muscade.FunctionFromVector</code></a></li><li><a href="reference.html#Muscade.Hold"><code>Muscade.Hold</code></a></li><li><a href="reference.html#Muscade.IdVec"><code>Muscade.IdVec</code></a></li><li><a href="reference.html#Muscade.Model"><code>Muscade.Model</code></a></li><li><a href="reference.html#Muscade.Monitor"><code>Muscade.Monitor</code></a></li><li><a href="reference.html#Muscade.Node"><code>Muscade.Node</code></a></li><li><a href="reference.html#Muscade.QuickFix"><code>Muscade.QuickFix</code></a></li><li><a href="reference.html#Muscade.SingleDofCost"><code>Muscade.SingleDofCost</code></a></li><li><a href="reference.html#Muscade.SingleUdof"><code>Muscade.SingleUdof</code></a></li><li><a href="reference.html#Muscade.SpyAxe"><code>Muscade.SpyAxe</code></a></li><li><a href="reference.html#Muscade.SweepX"><code>Muscade.SweepX</code></a></li><li><a href="reference.html#Muscade.composeJacobian"><code>Muscade.composeJacobian</code></a></li><li><a href="reference.html#Muscade.composevalue"><code>Muscade.composevalue</code></a></li><li><a href="reference.html#Muscade.default"><code>Muscade.default</code></a></li><li><a href="reference.html#Muscade.geneig"><code>Muscade.geneig</code></a></li><li><a href="reference.html#Muscade.increment-Union{Tuple{OX}, Tuple{Any, Muscade.EigXUincrement, Int64, AbstractVector{Int64}, AbstractVector}} where OX"><code>Muscade.increment</code></a></li><li><a href="reference.html#Muscade.increment"><code>Muscade.increment</code></a></li><li><a href="reference.html#Muscade.motion-Union{Tuple{Tuple{Vararg{StaticArraysCore.SVector{N, R}, ND}}}, Tuple{R}, Tuple{N}, Tuple{P}, Tuple{ND}} where {ND, P, N, R}"><code>Muscade.motion</code></a></li><li><a href="reference.html#Muscade.motion‚Åª¬π-Union{Tuple{Real}, Tuple{P}} where P"><code>Muscade.motion‚Åª¬π</code></a></li><li><a href="reference.html#Muscade.revariate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{O}} where {O, N, R}"><code>Muscade.revariate</code></a></li><li><a href="reference.html#Muscade.value-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>Muscade.value</code></a></li><li><a href="reference.html#Muscade.value_‚àÇ-Union{Tuple{Any}, Tuple{N}, Tuple{P}} where {P, N}"><code>Muscade.value_‚àÇ</code></a></li><li><a href="reference.html#Muscade.variate-Union{Tuple{StaticArraysCore.SVector{N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Muscade.variate</code></a></li><li><a href="reference.html#Muscade.Œ¥-Union{Tuple{}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R&lt;:Real}"><code>Muscade.Œ¥</code></a></li><li><a href="reference.html#Muscade.‚ÑÇ"><code>Muscade.‚ÑÇ</code></a></li><li><a href="reference.html#Muscade.‚Ñï"><code>Muscade.‚Ñï</code></a></li><li><a href="reference.html#Muscade.‚Ñù"><code>Muscade.‚Ñù</code></a></li><li><a href="reference.html#Muscade.‚Ñ§"><code>Muscade.‚Ñ§</code></a></li><li><a href="reference.html#Muscade.‚àÇ-Union{Tuple{‚àÇ‚Ñù{P, N, R}}, Tuple{R}, Tuple{N}, Tuple{P}} where {P, N, R}"><code>Muscade.‚àÇ</code></a></li><li><a href="reference.html#Muscade.ùîπ"><code>Muscade.ùîπ</code></a></li><li><a href="reference.html#Muscade.ùïì"><code>Muscade.ùïì</code></a></li><li><a href="reference.html#Muscade.ùïî"><code>Muscade.ùïî</code></a></li><li><a href="reference.html#Muscade.ùïü"><code>Muscade.ùïü</code></a></li><li><a href="reference.html#Muscade.ùï£"><code>Muscade.ùï£</code></a></li><li><a href="reference.html#Muscade.ùï´"><code>Muscade.ùï´</code></a></li><li><a href="reference.html#Muscade.:‚àò‚ÇÅ-Tuple{Any, Any}"><code>Muscade.:‚àò‚ÇÅ</code></a></li><li><a href="reference.html#Muscade.:‚àò‚ÇÇ-Tuple{Any, Any}"><code>Muscade.:‚àò‚ÇÇ</code></a></li><li><a href="reference.html#Muscade.:‚äó-Tuple{Any, Any}"><code>Muscade.:‚äó</code></a></li><li><a href="reference.html#Muscade.McLaurin-Tuple{Tuple, Any}"><code>Muscade.McLaurin</code></a></li><li><a href="reference.html#Muscade.QuadraticFunction-Tuple{Float64, Float64}"><code>Muscade.QuadraticFunction</code></a></li><li><a href="reference.html#Muscade.Taylor-Tuple{Tuple, Any, Any}"><code>Muscade.Taylor</code></a></li><li><a href="reference.html#Muscade.VALUE-Tuple{Nothing}"><code>Muscade.VALUE</code></a></li><li><a href="reference.html#Muscade.addelement!-Union{Tuple{T}, Tuple{Model, Type{T}, AbstractMatrix{Muscade.NodID}}} where T&lt;:AbstractElement"><code>Muscade.addelement!</code></a></li><li><a href="reference.html#Muscade.addin!-Union{Tuple{Tv}, Tuple{Vector{Int64}, AbstractVector{Tv}, Vector{Tv}, Int64}, Tuple{Vector{Int64}, AbstractVector{Tv}, Vector{Tv}, Int64, Real}} where Tv"><code>Muscade.addin!</code></a></li><li><a href="reference.html#Muscade.addin!-Union{Tuple{Ti}, Tuple{Tv}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64}, Tuple{SparseArrays.SparseMatrixCSC{Vector{Int64}, Int64}, SparseArrays.SparseMatrixCSC{Tv, Ti}, SparseArrays.SparseMatrixCSC{Tv, Ti}, Int64, Int64, Real}} where {Tv, Ti&lt;:Integer}"><code>Muscade.addin!</code></a></li><li><a href="reference.html#Muscade.addnode!-Tuple{Model, AbstractMatrix{t} where t&lt;:Real}"><code>Muscade.addnode!</code></a></li><li><a href="reference.html#Muscade.compose-Tuple{Any, Any}"><code>Muscade.compose</code></a></li><li><a href="reference.html#Muscade.constants-Tuple{Tuple}"><code>Muscade.constants</code></a></li><li><a href="reference.html#Muscade.coord-Tuple{AbstractVector{Node}}"><code>Muscade.coord</code></a></li><li><a href="reference.html#Muscade.describe-Tuple{Muscade.State}"><code>Muscade.describe</code></a></li><li><a href="reference.html#Muscade.describe-Tuple{Model, Muscade.EleID}"><code>Muscade.describe</code></a></li><li><a href="reference.html#Muscade.diffed_lagrangian-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>Muscade.diffed_lagrangian</code></a></li><li><a href="reference.html#Muscade.diffed_residual-Tuple{eletyp} where eletyp&lt;:AbstractElement"><code>Muscade.diffed_residual</code></a></li><li><a href="reference.html#Muscade.doflist-Union{Tuple{Type{E}}, Tuple{E}} where E&lt;:AbstractElement"><code>Muscade.doflist</code></a></li><li><a href="reference.html#Muscade.draw-Union{Tuple{E}, Tuple{Any, AbstractVector{E}, Vararg{Any}}} where E&lt;:AbstractElement"><code>Muscade.draw</code></a></li><li><a href="reference.html#Muscade.draw-Tuple{Any, Muscade.State, Vector{Muscade.EleID}}"><code>Muscade.draw</code></a></li><li><a href="reference.html#Muscade.eletyp-Tuple{Model}"><code>Muscade.eletyp</code></a></li><li><a href="reference.html#Muscade.equal-Tuple{Any}"><code>Muscade.equal</code></a></li><li><a href="reference.html#Muscade.fast-Tuple{Any, Any}"><code>Muscade.fast</code></a></li><li><a href="reference.html#Muscade.findlastassigned-Tuple{Vector}"><code>Muscade.findlastassigned</code></a></li><li><a href="reference.html#Muscade.getdof-Tuple{Muscade.State}"><code>Muscade.getdof</code></a></li><li><a href="reference.html#Muscade.getndof-Tuple{DataType}"><code>Muscade.getndof</code></a></li><li><a href="reference.html#Muscade.getresult-Union{Tuple{S}, Tuple{Vector{S}, Any, Vector{Muscade.EleID}}} where S&lt;:Muscade.State"><code>Muscade.getresult</code></a></li><li><a href="reference.html#Muscade.getsomedofs-Union{Tuple{Nder}, Tuple{Tuple{Vararg{StaticArraysCore.SVector, Nder}}, Any}} where Nder"><code>Muscade.getsomedofs</code></a></li><li><a href="reference.html#Muscade.getŒ¥t-Tuple{Any, Any}"><code>Muscade.getŒ¥t</code></a></li><li><a href="reference.html#Muscade.getŒ¥œâ-Tuple{Any, Any}"><code>Muscade.getŒ¥œâ</code></a></li><li><a href="reference.html#Muscade.imod-Tuple{Integer, Any}"><code>Muscade.imod</code></a></li><li><a href="reference.html#Muscade.initialize!-Tuple{Model}"><code>Muscade.initialize!</code></a></li><li><a href="reference.html#Muscade.lagrangian-Tuple{}"><code>Muscade.lagrangian</code></a></li><li><a href="reference.html#Muscade.merge-Tuple{Any}"><code>Muscade.merge</code></a></li><li><a href="reference.html#Muscade.muscadeerror-Tuple{NamedTuple, Any}"><code>Muscade.muscadeerror</code></a></li><li><a href="reference.html#Muscade.nosecondorder-Tuple{Type{&lt;:AbstractElement}}"><code>Muscade.nosecondorder</code></a></li><li><a href="reference.html#Muscade.off-Tuple{Any}"><code>Muscade.off</code></a></li><li><a href="reference.html#Muscade.positive-Tuple{Any}"><code>Muscade.positive</code></a></li><li><a href="reference.html#Muscade.prepare-Union{Tuple{SparseArrays.SparseMatrixCSC{SparseArrays.SparseMatrixCSC{Tv, Int64}, Int64}}, Tuple{Tv}} where Tv"><code>Muscade.prepare</code></a></li><li><a href="reference.html#Muscade.print_element_array-Tuple{AbstractElement, Symbol, AbstractVector}"><code>Muscade.print_element_array</code></a></li><li><a href="reference.html#Muscade.residual-Tuple{}"><code>Muscade.residual</code></a></li><li><a href="reference.html#Muscade.setdof!-Tuple{Muscade.State, Vector{Float64}}"><code>Muscade.setdof!</code></a></li><li><a href="reference.html#Muscade.setscale!-Tuple{Model}"><code>Muscade.setscale!</code></a></li><li><a href="reference.html#Muscade.solve-Tuple{Type{&lt;:Muscade.AbstractSolver}}"><code>Muscade.solve</code></a></li><li><a href="reference.html#Muscade.sparser!-Tuple{SparseArrays.SparseMatrixCSC, Function}"><code>Muscade.sparser!</code></a></li><li><a href="reference.html#Muscade.studyscale-Tuple{Muscade.State}"><code>Muscade.studyscale</code></a></li><li><a href="reference.html#Muscade.studysingular-Tuple{Muscade.State}"><code>Muscade.studysingular</code></a></li><li><a href="reference.html#Muscade.toggle-Union{Tuple{Tb}, Tuple{Ta}, Tuple{Bool, Ta, Tb}} where {Ta, Tb}"><code>Muscade.toggle</code></a></li><li><a href="reference.html#Muscade.‚àÇ0-Tuple{Any}"><code>Muscade.‚àÇ0</code></a></li><li><a href="reference.html#Muscade.‚àÇ1-Tuple{Any}"><code>Muscade.‚àÇ1</code></a></li><li><a href="reference.html#Muscade.‚àÇ2-Tuple{Any}"><code>Muscade.‚àÇ2</code></a></li><li><a href="reference.html#Muscade.ùîâ-Union{Tuple{R}, Tuple{AbstractVector{R}, Real}} where R&lt;:Real"><code>Muscade.ùîâ</code></a></li><li><a href="reference.html#Muscade.ùîâ‚Åª¬π-Union{Tuple{R}, Tuple{AbstractArray{Complex{R}, 1}, Real}} where R&lt;:Real"><code>Muscade.ùîâ‚Åª¬π</code></a></li><li><a href="reference.html#Muscade.ùï´log2-Tuple{Int64}"><code>Muscade.ùï´log2</code></a></li><li><a href="reference.html#Muscade.@espy-Tuple{Any}"><code>Muscade.@espy</code></a></li><li><a href="reference.html#Muscade.@espydbg-Tuple{Any}"><code>Muscade.@espydbg</code></a></li><li><a href="reference.html#Muscade.@once-Tuple{Any, Any}"><code>Muscade.@once</code></a></li><li><a href="reference.html#Muscade.@request-Tuple{Any}"><code>Muscade.@request</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="DryFriction.html">¬´ DryFriction</a><a class="docs-footer-nextpage" href="TypeStable.html">Type-stability ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Friday 27 June 2025 10:39">Friday 27 June 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
